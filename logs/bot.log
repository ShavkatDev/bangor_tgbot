2025-04-18 00:51:45,719 [INFO] root:39 - Logging system initialized
2025-04-18 00:51:45,722 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 00:51:45,943 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 00:51:46,334 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 00:51:46,346 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,346 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,346 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,347 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,347 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,347 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,347 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,348 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,348 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,348 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,348 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,348 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,351 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,351 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,352 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,353 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,353 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:51:46,353 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 00:51:46,354 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:51:46,354 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 00:51:46,354 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 00:51:46,354 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 00:51:46,355 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 00:51:46,355 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 00:51:46,448 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 00:52:05,879 [INFO] sqlalchemy.engine.Engine:1843 - select pg_catalog.version()
2025-04-18 00:52:05,880 [INFO] sqlalchemy.engine.Engine:1843 - [raw sql] ()
2025-04-18 00:52:05,884 [INFO] sqlalchemy.engine.Engine:1843 - select current_schema()
2025-04-18 00:52:05,884 [INFO] sqlalchemy.engine.Engine:1843 - [raw sql] ()
2025-04-18 00:52:05,889 [INFO] sqlalchemy.engine.Engine:1843 - show standard_conforming_strings
2025-04-18 00:52:05,890 [INFO] sqlalchemy.engine.Engine:1843 - [raw sql] ()
2025-04-18 00:52:05,892 [INFO] sqlalchemy.engine.Engine:2699 - BEGIN (implicit)
2025-04-18 00:52:05,903 [INFO] sqlalchemy.engine.Engine:1843 - SELECT user_settings.language 
FROM user_settings JOIN users ON users.id = user_settings.user_id 
WHERE users.telegram_id = $1::BIGINT
2025-04-18 00:52:05,903 [INFO] sqlalchemy.engine.Engine:1843 - [generated in 0.00048s] (845102332,)
2025-04-18 00:52:05,926 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:52:05,926 [INFO] sqlalchemy.engine.Engine:2702 - ROLLBACK
2025-04-18 00:52:05,927 [INFO] sqlalchemy.engine.Engine:2699 - BEGIN (implicit)
2025-04-18 00:52:05,928 [INFO] sqlalchemy.engine.Engine:1843 - SELECT users.id, users.telegram_id, users.university_id, users.group_id, users.inet_id, users.semester_id, users.student_id, users.password_inet, users.created_at 
FROM users 
WHERE users.telegram_id = $1::BIGINT
2025-04-18 00:52:05,928 [INFO] sqlalchemy.engine.Engine:1843 - [generated in 0.00024s] (845102332,)
2025-04-18 00:52:05,930 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 00:52:05,930 [INFO] sqlalchemy.engine.Engine:2702 - ROLLBACK
2025-04-18 00:52:05,930 [INFO] sqlalchemy.engine.Engine:2699 - BEGIN (implicit)
2025-04-18 00:52:05,931 [INFO] sqlalchemy.engine.Engine:1843 - SELECT user_settings.language 
FROM user_settings JOIN users ON users.id = user_settings.user_id 
WHERE users.telegram_id = $1::BIGINT
2025-04-18 00:52:05,931 [INFO] sqlalchemy.engine.Engine:1843 - [cached since 0.0279s ago] (845102332,)
2025-04-18 00:52:05,932 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:52:05,932 [INFO] sqlalchemy.engine.Engine:2702 - ROLLBACK
2025-04-18 00:52:05,933 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 00:52:06,365 [INFO] aiogram.event:172 - Update id=872171149 is handled. Duration 633 ms by bot id=7299087266
2025-04-18 00:53:46,954 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 00:53:47,210 [INFO] __main__:45 - Shutting down bot...
2025-04-18 00:53:47,213 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 00:53:47,223 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 00:53:50,292 [INFO] root:41 - Logging system initialized
2025-04-18 00:53:50,293 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 00:53:50,520 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 00:53:50,852 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 00:53:50,856 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,857 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,858 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,859 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,860 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,860 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,861 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,862 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,862 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,862 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,863 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,863 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,864 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,864 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,865 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,865 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,865 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,865 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,865 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,866 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,866 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,866 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,866 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,866 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 00:53:50,867 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 00:53:50,867 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 00:53:50,868 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 00:53:50,868 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 00:53:50,868 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 00:53:50,868 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 00:53:50,869 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 00:53:50,964 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 00:53:54,346 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:53:54,349 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 00:53:54,350 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:53:54,350 [INFO] app.handlers.settings:83 - User 845102332 (@dcwscr) requested account deletion
2025-04-18 00:53:54,778 [INFO] aiogram.event:172 - Update id=872171150 is handled. Duration 502 ms by bot id=7299087266
2025-04-18 00:54:06,316 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:06,727 [INFO] app.handlers.settings:106 - User 845102332 (@dcwscr) confirmed account deletion
2025-04-18 00:54:06,760 [INFO] root:133 - [User] Deleted user and settings for telegram_id=845102332
2025-04-18 00:54:06,978 [INFO] aiogram.event:172 - Update id=872171151 is handled. Duration 666 ms by bot id=7299087266
2025-04-18 00:54:12,430 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:12,432 [INFO] app.handlers.start:16 - User 845102332 (@dcwscr) started the bot with language en
2025-04-18 00:54:12,434 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 00:54:12,435 [INFO] app.handlers.start:25 - User 845102332 (@dcwscr) is not registered, showing login prompt
2025-04-18 00:54:12,644 [INFO] aiogram.event:172 - Update id=872171152 is handled. Duration 216 ms by bot id=7299087266
2025-04-18 00:54:14,390 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:14,393 [INFO] app.handlers.login:22 - User 845102332 (@dcwscr) started login process
2025-04-18 00:54:14,606 [INFO] aiogram.event:172 - Update id=872171153 is handled. Duration 218 ms by bot id=7299087266
2025-04-18 00:54:23,335 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:23,336 [INFO] app.handlers.login:40 - User 845102332 (@dcwscr) entered login
2025-04-18 00:54:23,795 [INFO] aiogram.event:172 - Update id=872171154 is handled. Duration 469 ms by bot id=7299087266
2025-04-18 00:54:26,913 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:26,915 [INFO] app.handlers.login:60 - User 845102332 (@dcwscr) entered password
2025-04-18 00:54:28,253 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 00:54:28,557 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/view/students?selfId=59158 "HTTP/1.1 200 "
2025-04-18 00:54:28,560 [INFO] app.utils.schedule:45 - Successfully fetched user data for inet_id 59158
2025-04-18 00:54:28,564 [INFO] root:46 - [User] Check registration status for telegram_id=845102332
2025-04-18 00:54:28,613 [INFO] root:76 - [User] Created user telegram_id=845102332, group_id=232
2025-04-18 00:54:28,616 [INFO] app.handlers.login:124 - User 845102332 (@dcwscr) successfully registered with group_id=232
2025-04-18 00:54:29,064 [INFO] aiogram.event:172 - Update id=872171155 is handled. Duration 2159 ms by bot id=7299087266
2025-04-18 00:54:30,821 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:30,822 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 00:54:30,823 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:30,824 [INFO] app.handlers.main_menu:31 - User 845102332 (@dcwscr) opened inet schedule menu
2025-04-18 00:54:31,034 [INFO] aiogram.event:172 - Update id=872171156 is handled. Duration 216 ms by bot id=7299087266
2025-04-18 00:54:32,828 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:32,830 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 00:54:32,833 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:32,833 [INFO] app.handlers.schedule:80 - User 845102332 (@dcwscr) requested today's schedule
2025-04-18 00:54:32,834 [INFO] app.handlers.schedule:29 - Getting schedule for user 845102332, mode=today, target_day=2025-04-17
2025-04-18 00:54:32,836 [INFO] root:72 - [User] Found group_id=232 for telegram_id=845102332
2025-04-18 00:54:32,854 [INFO] root:27 - [Cache] Schedule loaded for group_id=232, updated_at=2025-04-16 23:52:00.753504
2025-04-18 00:54:32,855 [INFO] app.handlers.schedule:45 - Cache miss for group_id=232, fetching fresh data
2025-04-18 00:54:32,856 [INFO] root:91 - [User] Credentials decrypted for telegram_id=845102332
2025-04-18 00:54:33,177 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 00:54:33,181 [INFO] app.utils.schedule:26 - Successfully obtained token for user b2305078
2025-04-18 00:54:33,709 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/student/view/schedules?from=2025-04-14&to=2025-04-20 "HTTP/1.1 200 "
2025-04-18 00:54:33,712 [INFO] app.utils.schedule:64 - Successfully fetched schedule data from 2025-04-14 to 2025-04-20
2025-04-18 00:54:33,728 [INFO] root:48 - [Cache] Schedule updated for group_id=232, week_start=2025-04-14
2025-04-18 00:54:33,731 [INFO] app.handlers.schedule:64 - Saved new schedule to cache for group_id=232
2025-04-18 00:54:33,949 [INFO] aiogram.event:172 - Update id=872171157 is handled. Duration 1126 ms by bot id=7299087266
2025-04-18 00:54:36,092 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:36,095 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 00:54:36,097 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 00:54:36,099 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 00:54:36,309 [INFO] aiogram.event:172 - Update id=872171158 is handled. Duration 223 ms by bot id=7299087266
2025-04-18 01:01:26,373 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 01:01:26,637 [INFO] __main__:45 - Shutting down bot...
2025-04-18 01:01:26,641 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:01:26,647 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 01:23:33,594 [INFO] root:41 - Logging system initialized
2025-04-18 01:23:33,595 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 01:23:33,826 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 01:23:34,202 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 01:23:34,202 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 01:23:34,206 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,206 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 01:23:34,207 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,207 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 01:23:34,208 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,208 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 01:23:34,208 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,208 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 01:23:34,209 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,209 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 01:23:34,210 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,210 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 01:23:34,211 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,211 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 01:23:34,212 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,212 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 01:23:34,212 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,213 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 01:23:34,213 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,213 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 01:23:34,214 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,214 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 01:23:34,215 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,215 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 01:23:34,216 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,216 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,217 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,217 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,217 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,218 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,218 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,218 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,218 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,219 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,219 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,220 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:23:34,220 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:23:34,220 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 01:23:34,221 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:23:34,221 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 01:23:34,222 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:23:34,222 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 01:23:34,222 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 01:23:34,222 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 01:23:34,317 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:24:14,068 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 01:24:14,322 [INFO] __main__:45 - Shutting down bot...
2025-04-18 01:24:14,323 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:24:14,326 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 01:36:35,218 [INFO] root:41 - Logging system initialized
2025-04-18 01:36:35,219 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 01:36:35,429 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 01:36:35,851 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 01:36:35,852 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 01:36:35,859 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,860 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 01:36:35,861 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,863 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 01:36:35,864 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,864 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 01:36:35,865 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,865 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 01:36:35,866 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,867 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 01:36:35,867 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,868 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 01:36:35,868 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,868 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 01:36:35,868 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,869 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 01:36:35,869 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,869 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 01:36:35,870 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,870 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 01:36:35,870 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,871 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 01:36:35,871 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,871 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 01:36:35,872 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,872 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,872 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,873 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,873 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,873 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,873 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,873 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,873 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,874 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,874 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,874 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:36:35,874 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:36:35,874 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 01:36:35,875 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:36:35,875 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 01:36:35,875 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:36:35,875 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 01:36:35,876 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 01:36:35,876 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 01:36:35,985 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:36:40,306 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:36:40,309 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 01:36:40,310 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:36:40,311 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 01:36:40,741 [INFO] aiogram.event:172 - Update id=872171159 is handled. Duration 507 ms by bot id=7299087266
2025-04-18 01:36:41,775 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:36:41,778 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 01:36:41,780 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:36:41,781 [INFO] app.handlers.settings:83 - User 845102332 (@dcwscr) requested account deletion
2025-04-18 01:36:42,006 [INFO] aiogram.event:172 - Update id=872171160 is handled. Duration 237 ms by bot id=7299087266
2025-04-18 01:36:43,249 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:36:43,669 [INFO] app.handlers.settings:106 - User 845102332 (@dcwscr) confirmed account deletion
2025-04-18 01:36:43,702 [INFO] root:133 - [User] Deleted user and settings for telegram_id=845102332
2025-04-18 01:36:43,918 [INFO] aiogram.event:172 - Update id=872171161 is handled. Duration 672 ms by bot id=7299087266
2025-04-18 01:37:08,513 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:37:08,515 [INFO] app.handlers.start:16 - User 845102332 (@dcwscr) started the bot with language en
2025-04-18 01:37:08,517 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 01:37:08,518 [INFO] app.handlers.start:25 - User 845102332 (@dcwscr) is not registered, showing login prompt
2025-04-18 01:37:08,941 [INFO] aiogram.event:172 - Update id=872171162 is handled. Duration 433 ms by bot id=7299087266
2025-04-18 01:37:13,796 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:37:13,798 [INFO] app.handlers.login:23 - User 845102332 (@dcwscr) started login process
2025-04-18 01:37:13,799 [ERROR] app.handlers.login:42 - Error in login command for user 845102332: name 'LEXICON_MSG' is not defined
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\login.py", line 31, in login_command
    reply_markup=get_privacy_keyboard(lang)
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\keyboards\inline.py", line 6, in get_privacy_keyboard
    {"text": LEXICON_MSG["view_privacy_policy"][lang], "callback_data": "view_privacy"},
             ^^^^^^^^^^^
NameError: name 'LEXICON_MSG' is not defined
2025-04-18 01:37:13,810 [INFO] aiogram.event:172 - Update id=872171163 is not handled. Duration 20 ms by bot id=7299087266
2025-04-18 01:37:13,810 [ERROR] aiogram.event:315 - Cause exception while process update id=872171163 by bot id=7299087266
KeyError: 'error'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\login.py", line 31, in login_command
    reply_markup=get_privacy_keyboard(lang)
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\keyboards\inline.py", line 6, in get_privacy_keyboard
    {"text": LEXICON_MSG["view_privacy_policy"][lang], "callback_data": "view_privacy"},
             ^^^^^^^^^^^
NameError: name 'LEXICON_MSG' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\ignore_groups.py", line 8, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\registration_check.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\language.py", line 17, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\login.py", line 43, in login_command
    await message.answer(text=LEXICON_MSG['error'][lang])
                              ~~~~~~~~~~~^^^^^^^^^
KeyError: 'error'
2025-04-18 01:37:41,924 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 01:37:42,179 [INFO] __main__:45 - Shutting down bot...
2025-04-18 01:37:42,181 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:37:42,184 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 2025-04-18 01:46:02,784 [INFO] root:40 - Logging system initialized
2025-04-18 01:46:02,786 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 01:46:02,987 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 01:46:03,373 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 01:46:03,374 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 01:46:03,381 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,382 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 01:46:03,382 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,382 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 01:46:03,382 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,382 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 01:46:03,382 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,382 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 01:46:03,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,383 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 01:46:03,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,383 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 01:46:03,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,383 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 01:46:03,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,383 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 01:46:03,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,383 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 01:46:03,384 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,384 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 01:46:03,384 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,384 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 01:46:03,384 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,385 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 01:46:03,388 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,388 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,388 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,389 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,389 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,389 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,389 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,389 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,390 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,390 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,390 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,390 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:46:03,391 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:46:03,391 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 01:46:03,391 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:46:03,392 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 01:46:03,392 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:46:03,392 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 01:46:03,392 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 01:46:03,393 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 01:46:03,489 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:46:07,418 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:46:07,835 [INFO] aiogram.event:172 - Update id=872171164 is handled. Duration 545 ms by bot id=7299087266
2025-04-18 01:46:11,848 [INFO] aiogram.event:172 - Update id=872171165 is handled. Duration 456 ms by bot id=7299087266
2025-04-18 01:46:19,201 [INFO] aiogram.event:172 - Update id=872171166 is handled. Duration 454 ms by bot id=7299087266
2025-04-18 01:46:26,497 [INFO] aiogram.event:172 - Update id=872171167 is handled. Duration 464 ms by bot id=7299087266
2025-04-18 01:58:48,203 [INFO] root:40 - Logging system initialized
2025-04-18 01:58:48,204 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 01:58:48,399 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 01:58:48,788 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 01:58:48,788 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 01:58:48,790 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,790 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 01:58:48,791 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,791 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 01:58:48,791 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,791 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 01:58:48,791 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,792 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 01:58:48,792 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,792 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 01:58:48,792 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,792 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 01:58:48,793 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,793 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 01:58:48,793 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,793 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 01:58:48,794 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,794 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 01:58:48,794 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,794 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 01:58:48,795 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,795 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 01:58:48,795 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,795 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 01:58:48,796 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,796 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,796 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,797 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,797 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,797 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,797 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,797 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,798 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,798 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,798 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,798 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:58:48,799 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:58:48,799 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 01:58:48,799 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:58:48,799 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 01:58:48,800 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:58:48,800 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 01:58:48,800 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 01:58:48,800 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 01:58:48,901 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:59:01,505 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:59:01,506 [INFO] app.handlers.start:16 - User 845102332 (@dcwscr) started the bot with language en
2025-04-18 01:59:01,507 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 01:59:01,508 [INFO] app.handlers.start:25 - User 845102332 (@dcwscr) is not registered, showing login prompt
2025-04-18 01:59:01,929 [INFO] aiogram.event:172 - Update id=872171168 is handled. Duration 487 ms by bot id=7299087266
2025-04-18 01:59:03,460 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:59:03,461 [INFO] aiogram.event:172 - Update id=872171169 is not handled. Duration 3 ms by bot id=7299087266
2025-04-18 01:59:03,461 [ERROR] aiogram.event:315 - Cause exception while process update id=872171169 by bot id=7299087266
KeyError: 'view_terms'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\ignore_groups.py", line 8, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\registration_check.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\language.py", line 17, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\privacy.py", line 19, in show_privacy_policy
    reply_markup=get_privacy_keyboard("en")
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\keyboards\privacy_keyboard.py", line 9, in get_privacy_keyboard
    {"text": LEXICON_MSG["view_terms"][lang], "url": "https://telegra.ph/TERMS-of-SERVICE-04-17-5"}
             ~~~~~~~~~~~^^^^^^^^^^^^^^
KeyError: 'view_terms'
2025-04-18 01:59:10,111 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 01:59:10,363 [INFO] __main__:45 - Shutting down bot...
2025-04-18 01:59:10,365 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:59:10,368 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 01:59:42,768 [INFO] root:40 - Logging system initialized
2025-04-18 01:59:42,770 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 01:59:42,968 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 01:59:43,265 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 01:59:43,265 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 01:59:43,267 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,268 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 01:59:43,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,268 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 01:59:43,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,269 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 01:59:43,269 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,269 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 01:59:43,269 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,270 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 01:59:43,270 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,270 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 01:59:43,270 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,271 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 01:59:43,271 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,272 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 01:59:43,273 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,273 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 01:59:43,273 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,274 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 01:59:43,274 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,274 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 01:59:43,275 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,275 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 01:59:43,276 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,276 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,276 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,277 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,277 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,277 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,277 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 01:59:43,279 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:59:43,279 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 01:59:43,279 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 01:59:43,279 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 01:59:43,279 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 01:59:43,280 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 01:59:43,280 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 01:59:43,280 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 01:59:43,385 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 01:59:44,651 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 01:59:45,095 [INFO] aiogram.event:172 - Update id=872171170 is handled. Duration 507 ms by bot id=7299087266
2025-04-18 01:59:59,780 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:00:00,033 [INFO] __main__:45 - Shutting down bot...
2025-04-18 02:00:00,034 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:00:00,036 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:00:20,958 [INFO] root:40 - Logging system initialized
2025-04-18 02:00:20,959 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:00:21,162 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:00:21,540 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:00:21,540 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:00:21,542 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,542 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:00:21,542 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,542 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:00:21,543 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,543 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:00:21,543 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,543 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:00:21,544 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,544 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:00:21,544 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,544 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:00:21,544 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,544 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:00:21,545 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,545 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:00:21,545 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,545 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:00:21,546 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,546 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:00:21,546 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,546 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:00:21,546 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,547 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:00:21,548 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,548 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,548 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,549 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,549 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,549 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,549 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,549 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,550 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,550 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,550 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,550 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:21,551 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:00:21,551 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:00:21,551 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:21,552 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:00:21,552 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:00:21,552 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:00:21,552 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 02:00:21,553 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:00:21,648 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:00:24,825 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:00:25,277 [INFO] aiogram.event:172 - Update id=872171171 is handled. Duration 519 ms by bot id=7299087266
2025-04-18 02:00:42,336 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:00:42,593 [INFO] __main__:45 - Shutting down bot...
2025-04-18 02:00:42,594 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:00:42,595 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:00:45,209 [INFO] root:40 - Logging system initialized
2025-04-18 02:00:45,210 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:00:45,407 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:00:45,702 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:00:45,703 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:00:45,705 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,705 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:00:45,705 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,705 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:00:45,706 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,706 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:00:45,707 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,707 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:00:45,707 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,707 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:00:45,707 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,708 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:00:45,708 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,708 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:00:45,708 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,708 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:00:45,709 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,709 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:00:45,709 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,709 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:00:45,709 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,710 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:00:45,710 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,710 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:00:45,710 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,711 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,711 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,711 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,711 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,711 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,712 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,712 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,712 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,712 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,713 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,713 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:00:45,713 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:00:45,713 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:00:45,714 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:00:45,714 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:00:45,714 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:00:45,714 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:00:45,714 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 02:00:45,714 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:00:45,812 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:00:47,115 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:00:47,535 [INFO] aiogram.event:172 - Update id=872171172 is handled. Duration 484 ms by bot id=7299087266
2025-04-18 02:01:18,617 [INFO] aiogram.event:172 - Update id=872171173 is handled. Duration 627 ms by bot id=7299087266
2025-04-18 02:02:59,137 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:02:59,397 [INFO] __main__:45 - Shutting down bot...
2025-04-18 02:02:59,399 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:02:59,402 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:08:36,120 [INFO] root:40 - Logging system initialized
2025-04-18 02:08:36,121 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:08:36,326 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:08:36,707 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:08:36,707 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:08:36,710 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,711 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:08:36,711 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,711 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:08:36,712 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,712 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:08:36,712 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,712 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:08:36,713 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,713 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:08:36,713 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,713 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:08:36,714 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,714 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:08:36,714 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,714 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:08:36,715 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,715 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:08:36,715 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,715 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:08:36,716 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,716 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:08:36,716 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,716 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:08:36,717 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,717 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,718 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,718 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,718 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,718 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,718 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,719 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,719 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,719 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,719 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,720 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:08:36,720 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:08:36,720 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:08:36,721 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:08:36,721 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:08:36,721 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:08:36,721 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:08:36,722 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 02:08:36,722 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:08:36,817 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:08:39,235 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:08:39,637 [INFO] aiogram.event:172 - Update id=872171174 is handled. Duration 460 ms by bot id=7299087266
2025-04-18 02:08:41,473 [INFO] app.handlers.login:22 - User 7299087266 (@singapore_unibot) started login process
2025-04-18 02:08:41,897 [INFO] aiogram.event:172 - Update id=872171175 is handled. Duration 624 ms by bot id=7299087266
2025-04-18 02:08:44,459 [INFO] app.handlers.login:22 - User 7299087266 (@singapore_unibot) started login process
2025-04-18 02:08:44,864 [INFO] aiogram.event:172 - Update id=872171176 is handled. Duration 608 ms by bot id=7299087266
2025-04-18 02:09:06,792 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:09:07,051 [INFO] __main__:45 - Shutting down bot...
2025-04-18 02:09:07,053 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:09:07,055 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:09:09,750 [INFO] root:40 - Logging system initialized
2025-04-18 02:09:09,751 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:09:09,961 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:09:10,261 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:09:10,262 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:09:10,264 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,264 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:09:10,265 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,265 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:09:10,265 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,266 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:09:10,266 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,266 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:09:10,266 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,266 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:09:10,267 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,267 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:09:10,267 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,267 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:09:10,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,268 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:09:10,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,269 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:09:10,269 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,269 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:09:10,270 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,270 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:09:10,270 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,270 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:09:10,271 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,271 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,272 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,272 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,272 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,272 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,272 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,273 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,273 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,273 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,273 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,274 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:09:10,274 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:09:10,274 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:09:10,275 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:09:10,275 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:09:10,275 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:09:10,276 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:09:10,276 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 02:09:10,276 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:09:10,375 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:09:11,272 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:11,748 [INFO] aiogram.event:172 - Update id=872171177 is handled. Duration 541 ms by bot id=7299087266
2025-04-18 02:09:13,409 [INFO] app.handlers.login:22 - User 7299087266 (@singapore_unibot) started login process
2025-04-18 02:09:13,941 [INFO] aiogram.event:172 - Update id=872171178 is handled. Duration 738 ms by bot id=7299087266
2025-04-18 02:09:17,144 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:17,144 [INFO] app.handlers.login:48 - User 845102332 (@dcwscr) entered login
2025-04-18 02:09:17,569 [INFO] aiogram.event:172 - Update id=872171179 is handled. Duration 427 ms by bot id=7299087266
2025-04-18 02:09:21,653 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:21,654 [INFO] app.handlers.login:68 - User 845102332 (@dcwscr) entered password
2025-04-18 02:09:22,955 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 02:09:23,242 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/view/students?selfId=59158 "HTTP/1.1 200 "
2025-04-18 02:09:23,243 [INFO] app.utils.schedule:45 - Successfully fetched user data for inet_id 59158
2025-04-18 02:09:23,245 [INFO] root:46 - [User] Check registration status for telegram_id=845102332
2025-04-18 02:09:23,259 [INFO] root:76 - [User] Created user telegram_id=845102332, group_id=232
2025-04-18 02:09:23,265 [INFO] app.handlers.login:132 - User 845102332 (@dcwscr) successfully registered with group_id=232
2025-04-18 02:09:23,684 [INFO] aiogram.event:172 - Update id=872171180 is handled. Duration 2033 ms by bot id=7299087266
2025-04-18 02:09:26,245 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:26,247 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:09:26,248 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:26,249 [INFO] app.handlers.main_menu:31 - User 845102332 (@dcwscr) opened inet schedule menu
2025-04-18 02:09:26,471 [INFO] aiogram.event:172 - Update id=872171181 is handled. Duration 226 ms by bot id=7299087266
2025-04-18 02:09:27,216 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:27,220 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:09:27,221 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:27,221 [INFO] app.handlers.schedule:80 - User 845102332 (@dcwscr) requested today's schedule
2025-04-18 02:09:27,222 [INFO] app.handlers.schedule:29 - Getting schedule for user 845102332, mode=today, target_day=2025-04-17
2025-04-18 02:09:27,223 [INFO] root:72 - [User] Found group_id=232 for telegram_id=845102332
2025-04-18 02:09:27,227 [INFO] root:27 - [Cache] Schedule loaded for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:09:27,228 [INFO] app.handlers.schedule:39 - Using cached schedule for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:09:27,453 [INFO] aiogram.event:172 - Update id=872171182 is handled. Duration 238 ms by bot id=7299087266
2025-04-18 02:09:29,016 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:29,018 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:09:29,019 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:29,019 [INFO] app.handlers.schedule:93 - User 845102332 (@dcwscr) requested tomorrow's schedule
2025-04-18 02:09:29,020 [INFO] app.handlers.schedule:29 - Getting schedule for user 845102332, mode=tomorrow, target_day=2025-04-18
2025-04-18 02:09:29,021 [INFO] root:72 - [User] Found group_id=232 for telegram_id=845102332
2025-04-18 02:09:29,022 [INFO] root:27 - [Cache] Schedule loaded for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:09:29,022 [INFO] app.handlers.schedule:39 - Using cached schedule for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:09:29,233 [INFO] aiogram.event:172 - Update id=872171183 is handled. Duration 218 ms by bot id=7299087266
2025-04-18 02:09:30,738 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:30,740 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:09:30,741 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:30,742 [INFO] app.handlers.schedule:106 - User 845102332 (@dcwscr) requested week schedule
2025-04-18 02:09:30,742 [INFO] app.handlers.schedule:29 - Getting schedule for user 845102332, mode=week, target_day=2025-04-18
2025-04-18 02:09:30,743 [INFO] root:72 - [User] Found group_id=232 for telegram_id=845102332
2025-04-18 02:09:30,744 [INFO] root:27 - [Cache] Schedule loaded for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:09:30,745 [INFO] app.handlers.schedule:39 - Using cached schedule for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:09:30,963 [INFO] aiogram.event:172 - Update id=872171184 is handled. Duration 227 ms by bot id=7299087266
2025-04-18 02:09:33,268 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:33,269 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:09:33,270 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:09:33,271 [INFO] app.handlers.schedule:119 - User 845102332 (@dcwscr) requested attendance
2025-04-18 02:09:33,271 [INFO] root:91 - [User] Credentials decrypted for telegram_id=845102332
2025-04-18 02:09:33,582 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 02:09:33,582 [INFO] app.utils.schedule:26 - Successfully obtained token for user b2305078
2025-04-18 02:09:33,584 [ERROR] app.utils.schedule:132 - Error fetching attendance data for user 845102332: cannot access local variable 'inet_id' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\utils\schedule.py", line 117, in fetch_attendance_data
    inet_id, semester_id = await get_attendance_data(telegram_id)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\db\crud\user.py", line 36, in get_attendance_data
    logging.info(f"[User] Attendance data for telegram_id={telegram_id}: inet_id={inet_id or 0}, semester_id={semester_id or 0}")
                                                                                  ^^^^^^^
UnboundLocalError: cannot access local variable 'inet_id' where it is not associated with a value
2025-04-18 02:09:33,805 [INFO] aiogram.event:172 - Update id=872171185 is handled. Duration 539 ms by bot id=7299087266
2025-04-18 02:10:33,966 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:10:34,228 [INFO] __main__:45 - Shutting down bot...
2025-04-18 02:10:34,228 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:10:34,229 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:10:37,536 [INFO] root:40 - Logging system initialized
2025-04-18 02:10:37,537 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:10:37,739 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:10:38,036 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:10:38,036 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:10:38,046 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,047 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:10:38,047 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,047 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:10:38,048 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,048 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:10:38,048 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,048 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:10:38,049 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,049 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:10:38,049 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,050 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:10:38,050 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,050 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:10:38,051 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,051 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:10:38,051 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,052 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:10:38,052 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,052 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:10:38,052 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,053 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:10:38,053 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,053 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:10:38,056 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,057 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,057 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,057 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,057 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,058 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,058 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,058 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,059 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,059 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,059 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,059 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:10:38,060 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:10:38,060 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:10:38,060 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:10:38,061 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:10:38,061 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:10:38,061 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:10:38,062 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 02:10:38,062 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:10:38,158 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:10:40,094 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:40,097 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:10:40,098 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:40,098 [INFO] app.handlers.schedule:119 - User 845102332 (@dcwscr) requested attendance
2025-04-18 02:10:40,101 [INFO] root:92 - [User] Credentials decrypted for telegram_id=845102332
2025-04-18 02:10:40,664 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 02:10:40,665 [INFO] app.utils.schedule:26 - Successfully obtained token for user b2305078
2025-04-18 02:10:40,667 [INFO] root:37 - [User] Attendance data for telegram_id=845102332
2025-04-18 02:10:40,949 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/students/attendances?page=0&perPage=10&direction=ASC&sortBy=id&semesterId=242&studentId=59158 "HTTP/1.1 200 "
2025-04-18 02:10:40,950 [INFO] app.utils.schedule:127 - Successfully fetched attendance data for user 845102332
2025-04-18 02:10:41,376 [INFO] aiogram.event:172 - Update id=872171186 is handled. Duration 2132 ms by bot id=7299087266
2025-04-18 02:10:44,733 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:44,734 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:10:44,736 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:44,736 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 02:10:44,952 [INFO] aiogram.event:172 - Update id=872171187 is handled. Duration 221 ms by bot id=7299087266
2025-04-18 02:10:46,215 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:46,216 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:10:46,218 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:46,219 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 02:10:46,488 [INFO] aiogram.event:172 - Update id=872171188 is handled. Duration 275 ms by bot id=7299087266
2025-04-18 02:10:48,214 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:48,215 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:10:48,217 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:10:48,217 [INFO] app.handlers.settings:145 - User 845102332 (@dcwscr) opened mailing settings
2025-04-18 02:10:48,219 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 02:10:48,431 [INFO] aiogram.event:172 - Update id=872171189 is handled. Duration 219 ms by bot id=7299087266
2025-04-18 02:10:49,629 [INFO] aiogram.event:172 - Update id=872171190 is not handled. Duration 1 ms by bot id=7299087266
2025-04-18 02:10:49,629 [ERROR] aiogram.event:315 - Cause exception while process update id=872171190 by bot id=7299087266
TypeError: toggle_daily_digest_handler() missing 1 required positional argument: 'lang'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 ~~~~~~~^^
TypeError: toggle_daily_digest_handler() missing 1 required positional argument: 'lang'
2025-04-18 02:12:25,405 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:12:25,658 [INFO] __main__:45 - Shutting down bot...
2025-04-18 02:12:25,658 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:12:25,660 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:12:29,808 [INFO] root:40 - Logging system initialized
2025-04-18 02:12:29,809 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:12:30,021 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:12:30,305 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:12:30,305 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:12:30,307 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,307 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:12:30,308 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,308 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:12:30,308 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,309 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:12:30,309 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,309 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:12:30,310 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,310 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:12:30,310 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,311 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:12:30,311 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,311 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:12:30,312 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,312 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:12:30,312 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,312 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:12:30,313 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,313 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:12:30,313 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,313 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:12:30,314 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,314 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:12:30,315 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,315 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,315 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,316 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,316 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,316 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,316 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,317 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,317 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,317 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,318 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,318 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:12:30,318 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:12:30,318 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:12:30,319 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:12:30,319 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:12:30,320 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:12:30,320 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:12:30,320 [INFO] __main__:39 - Bot is ready to start polling...
2025-04-18 02:12:30,321 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:12:30,414 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:12:33,715 [INFO] aiogram.event:172 - Update id=872171191 is not handled. Duration 1 ms by bot id=7299087266
2025-04-18 02:12:33,716 [ERROR] aiogram.event:315 - Cause exception while process update id=872171191 by bot id=7299087266
TypeError: toggle_daily_digest_handler() missing 1 required positional argument: 'lang'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 ~~~~~~~^^
TypeError: toggle_daily_digest_handler() missing 1 required positional argument: 'lang'
2025-04-18 02:12:41,217 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:12:41,473 [INFO] __main__:45 - Shutting down bot...
2025-04-18 02:12:41,473 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:12:41,475 [INFO] __main__:53 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:13:16,583 [INFO] root:40 - Logging system initialized
2025-04-18 02:13:16,585 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:13:16,784 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:13:17,083 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:13:17,084 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:13:17,086 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,086 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:13:17,086 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,087 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:13:17,087 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,087 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:13:17,087 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,087 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:13:17,088 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,088 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:13:17,088 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,088 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:13:17,088 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,088 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:13:17,088 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,089 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:13:17,089 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,089 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:13:17,089 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,090 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:13:17,090 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,090 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:13:17,091 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,091 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:13:17,091 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,092 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,092 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,092 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,092 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,093 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,093 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,093 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,093 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,093 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,094 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,094 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:13:17,094 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:13:17,094 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:13:17,094 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:13:17,095 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:13:17,095 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:13:17,095 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:13:17,095 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:13:17,096 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:13:17,193 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:13:18,977 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:18,978 [INFO] app.handlers.settings:167 - User 845102332 (@dcwscr) toggled daily digest
2025-04-18 02:13:18,991 [INFO] root:28 - [Settings] Toggled daily_digest for telegram_id=845102332 → False
2025-04-18 02:13:18,992 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 02:13:19,602 [INFO] aiogram.event:172 - Update id=872171192 is handled. Duration 688 ms by bot id=7299087266
2025-04-18 02:13:21,515 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:21,515 [INFO] app.handlers.settings:167 - User 845102332 (@dcwscr) toggled daily digest
2025-04-18 02:13:21,519 [INFO] root:28 - [Settings] Toggled daily_digest for telegram_id=845102332 → True
2025-04-18 02:13:21,520 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 02:13:21,930 [INFO] aiogram.event:172 - Update id=872171193 is handled. Duration 418 ms by bot id=7299087266
2025-04-18 02:13:22,410 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:22,411 [INFO] app.handlers.settings:189 - User 845102332 (@dcwscr) toggled today schedule digest
2025-04-18 02:13:22,413 [INFO] root:40 - [Settings] Toggled today_schedule_digest for telegram_id=845102332 → False
2025-04-18 02:13:22,415 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 02:13:22,826 [INFO] aiogram.event:172 - Update id=872171194 is handled. Duration 417 ms by bot id=7299087266
2025-04-18 02:13:23,444 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:23,444 [INFO] app.handlers.settings:189 - User 845102332 (@dcwscr) toggled today schedule digest
2025-04-18 02:13:23,446 [INFO] root:40 - [Settings] Toggled today_schedule_digest for telegram_id=845102332 → True
2025-04-18 02:13:23,453 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 02:13:23,863 [INFO] aiogram.event:172 - Update id=872171195 is handled. Duration 421 ms by bot id=7299087266
2025-04-18 02:13:25,388 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:25,389 [INFO] app.handlers.settings:36 - User 845102332 (@dcwscr) returned to settings menu
2025-04-18 02:13:25,390 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:25,809 [INFO] aiogram.event:172 - Update id=872171196 is handled. Duration 422 ms by bot id=7299087266
2025-04-18 02:13:31,769 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:31,771 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:13:31,773 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:31,773 [INFO] app.handlers.settings:53 - User 845102332 (@dcwscr) opened language settings
2025-04-18 02:13:31,990 [INFO] aiogram.event:172 - Update id=872171197 is handled. Duration 222 ms by bot id=7299087266
2025-04-18 02:13:35,341 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 02:13:35,341 [INFO] app.handlers.settings:129 - User 845102332 (@dcwscr) changed language to ru
2025-04-18 02:13:35,344 [INFO] root:111 - [User] Updated language to 'ru' for telegram_id=845102332
2025-04-18 02:13:35,958 [INFO] aiogram.event:172 - Update id=872171198 is handled. Duration 619 ms by bot id=7299087266
2025-04-18 02:13:38,261 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:13:38,262 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:13:38,264 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:13:38,264 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 02:13:38,469 [INFO] aiogram.event:172 - Update id=872171199 is handled. Duration 211 ms by bot id=7299087266
2025-04-18 02:13:41,111 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:13:41,113 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:13:41,114 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:13:41,114 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 02:13:41,340 [INFO] root:17 - [Support] New ticket from user_id=845102332, message_id=2077
2025-04-18 02:13:41,340 [INFO] app.handlers.support:62 - Support ticket created for user 845102332 (@dcwscr)
2025-04-18 02:13:42,397 [INFO] aiogram.event:172 - Update id=872171200 is handled. Duration 1288 ms by bot id=7299087266
2025-04-18 02:13:49,069 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:13:49,071 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:13:49,072 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:13:49,072 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:13:49,080 [INFO] root:26 - [Support] Fetched open ticket for message_id=2078
2025-04-18 02:13:49,080 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:13:49,291 [INFO] aiogram.event:172 - Update id=872171201 is handled. Duration 223 ms by bot id=7299087266
2025-04-18 02:14:06,318 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:14:06,582 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:14:06,585 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:14:06,587 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:16:13,896 [INFO] root:40 - Logging system initialized
2025-04-18 02:16:13,898 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:16:14,098 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:16:14,493 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:16:14,494 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:16:14,496 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,496 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:16:14,496 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,496 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:16:14,497 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,497 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:16:14,497 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,497 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:16:14,498 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,498 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:16:14,498 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,498 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:16:14,498 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,499 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:16:14,499 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,499 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:16:14,499 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,499 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:16:14,500 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,500 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:16:14,500 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,500 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:16:14,501 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,501 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:16:14,502 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,502 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,503 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,503 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,503 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,503 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,504 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,504 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,504 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,504 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,504 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,505 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:16:14,505 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:16:14,505 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:16:14,505 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:16:14,506 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:16:14,506 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:16:14,506 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:16:14,506 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:16:14,507 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:16:14,607 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:16:19,861 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:16:19,864 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:16:19,865 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:16:19,865 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:16:19,867 [INFO] root:26 - [Support] Fetched open ticket for message_id=2078
2025-04-18 02:16:19,868 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:16:20,267 [INFO] aiogram.event:172 - Update id=872171202 is handled. Duration 575 ms by bot id=7299087266
2025-04-18 02:19:51,377 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:19:51,639 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:19:51,640 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:19:51,642 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:19:54,883 [INFO] root:40 - Logging system initialized
2025-04-18 02:19:54,884 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:19:55,089 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:19:55,467 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:19:55,467 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:19:55,470 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,470 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:19:55,471 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,471 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:19:55,471 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,471 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:19:55,471 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,471 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:19:55,472 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,472 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:19:55,472 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,472 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:19:55,472 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,473 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:19:55,473 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,473 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:19:55,474 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,474 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:19:55,474 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,474 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:19:55,475 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,475 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:19:55,475 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,475 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:19:55,476 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,476 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,476 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,476 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,477 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,477 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,477 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,477 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,477 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,477 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,477 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,478 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:19:55,478 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:19:55,478 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:19:55,478 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:19:55,479 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:19:55,479 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:19:55,479 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:19:55,479 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:19:55,479 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:19:55,581 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:20:05,394 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:05,396 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:20:05,397 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:05,398 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:20:05,399 [INFO] root:27 - [Support] Found 0 tickets for message_id=2078
2025-04-18 02:20:05,401 [WARNING] root:40 - [Support] No open ticket found for message_id=2078
2025-04-18 02:20:05,401 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:20:05,814 [INFO] aiogram.event:172 - Update id=872171203 is handled. Duration 477 ms by bot id=7299087266
2025-04-18 02:20:21,388 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:21,389 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:20:21,390 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:21,391 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:20:21,392 [INFO] root:27 - [Support] Found 0 tickets for message_id=2076
2025-04-18 02:20:21,392 [WARNING] root:40 - [Support] No open ticket found for message_id=2076
2025-04-18 02:20:21,393 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:20:21,857 [INFO] aiogram.event:172 - Update id=872171204 is handled. Duration 471 ms by bot id=7299087266
2025-04-18 02:20:43,735 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:43,736 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:20:43,737 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:43,738 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 02:20:44,150 [INFO] aiogram.event:172 - Update id=872171205 is handled. Duration 417 ms by bot id=7299087266
2025-04-18 02:20:47,057 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:47,059 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:20:47,060 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:47,060 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 02:20:47,288 [INFO] root:17 - [Support] New ticket from user_id=845102332, message_id=2094
2025-04-18 02:20:47,288 [INFO] app.handlers.support:62 - Support ticket created for user 845102332 (@dcwscr)
2025-04-18 02:20:48,386 [INFO] aiogram.event:172 - Update id=872171206 is handled. Duration 1330 ms by bot id=7299087266
2025-04-18 02:20:51,432 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:51,433 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:20:51,434 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:20:51,435 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:20:51,436 [INFO] root:27 - [Support] Found 0 tickets for message_id=2095
2025-04-18 02:20:51,436 [WARNING] root:40 - [Support] No open ticket found for message_id=2095
2025-04-18 02:20:51,437 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:20:51,657 [INFO] aiogram.event:172 - Update id=872171207 is handled. Duration 229 ms by bot id=7299087266
2025-04-18 02:21:34,852 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:21:35,116 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:21:35,116 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:21:35,118 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:21:37,785 [INFO] root:40 - Logging system initialized
2025-04-18 02:21:37,787 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:21:37,993 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:21:38,289 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:21:38,289 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:21:38,291 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,291 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:21:38,291 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,291 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:21:38,292 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,292 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:21:38,292 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,292 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:21:38,293 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,293 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:21:38,293 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,293 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:21:38,293 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,294 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:21:38,294 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,294 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:21:38,294 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,295 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:21:38,295 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,295 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:21:38,295 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,295 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:21:38,296 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,296 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:21:38,296 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,299 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,299 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:21:38,299 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:21:38,299 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:21:38,300 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:21:38,300 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:21:38,300 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:21:38,300 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:21:38,300 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:21:38,301 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:21:38,396 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:21:43,261 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:21:43,264 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:21:43,265 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:21:43,265 [INFO] app.handlers.support:90 - Replied id: 2095
2025-04-18 02:21:43,266 [INFO] app.handlers.support:93 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:21:43,267 [INFO] root:27 - [Support] Found 0 tickets for message_id=2095
2025-04-18 02:21:43,269 [WARNING] root:40 - [Support] No open ticket found for message_id=2095
2025-04-18 02:21:43,270 [WARNING] app.handlers.support:97 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:21:43,689 [INFO] aiogram.event:172 - Update id=872171208 is handled. Duration 490 ms by bot id=7299087266
2025-04-18 02:23:46,342 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:23:46,344 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:23:46,345 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:23:46,345 [INFO] app.handlers.support:90 - Replied id: 2078
2025-04-18 02:23:46,345 [INFO] app.handlers.support:93 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:23:46,346 [INFO] root:27 - [Support] Found 0 tickets for message_id=2078
2025-04-18 02:23:46,347 [WARNING] root:40 - [Support] No open ticket found for message_id=2078
2025-04-18 02:23:46,347 [WARNING] app.handlers.support:97 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:23:46,737 [INFO] aiogram.event:172 - Update id=872171209 is handled. Duration 398 ms by bot id=7299087266
2025-04-18 02:25:32,290 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:32,292 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:25:32,293 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:32,293 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 02:25:32,721 [INFO] aiogram.event:172 - Update id=872171210 is handled. Duration 450 ms by bot id=7299087266
2025-04-18 02:25:39,558 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:39,558 [INFO] app.handlers.start:16 - User 845102332 (@dcwscr) started the bot with language ru
2025-04-18 02:25:39,560 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:25:39,560 [INFO] app.handlers.start:22 - User 845102332 (@dcwscr) is registered, showing main menu
2025-04-18 02:25:39,778 [INFO] aiogram.event:172 - Update id=872171211 is handled. Duration 222 ms by bot id=7299087266
2025-04-18 02:25:40,898 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:40,899 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:25:40,901 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:40,901 [INFO] app.handlers.main_menu:31 - User 845102332 (@dcwscr) opened inet schedule menu
2025-04-18 02:25:41,145 [INFO] aiogram.event:172 - Update id=872171212 is handled. Duration 249 ms by bot id=7299087266
2025-04-18 02:25:47,787 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:47,788 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:25:47,790 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:47,790 [INFO] app.handlers.schedule:80 - User 845102332 (@dcwscr) requested today's schedule
2025-04-18 02:25:47,791 [INFO] app.handlers.schedule:29 - Getting schedule for user 845102332, mode=today, target_day=2025-04-17
2025-04-18 02:25:47,792 [INFO] root:72 - [User] Found group_id=232 for telegram_id=845102332
2025-04-18 02:25:47,796 [INFO] root:27 - [Cache] Schedule loaded for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:25:47,797 [INFO] app.handlers.schedule:39 - Using cached schedule for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 02:25:48,026 [INFO] aiogram.event:172 - Update id=872171213 is handled. Duration 241 ms by bot id=7299087266
2025-04-18 02:25:48,960 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:48,962 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:25:48,963 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:48,964 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 02:25:49,205 [INFO] aiogram.event:172 - Update id=872171214 is handled. Duration 246 ms by bot id=7299087266
2025-04-18 02:25:51,448 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:51,449 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:25:51,450 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:25:51,450 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 02:25:51,674 [INFO] root:17 - [Support] New ticket from user_id=845102332, message_id=2117
2025-04-18 02:25:51,675 [INFO] app.handlers.support:62 - Support ticket created for user 845102332 (@dcwscr)
2025-04-18 02:25:52,757 [INFO] aiogram.event:172 - Update id=872171215 is handled. Duration 1310 ms by bot id=7299087266
2025-04-18 02:26:18,507 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:26:18,509 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:26:18,510 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:26:18,510 [INFO] app.handlers.support:90 - Replied id: 2118
2025-04-18 02:26:18,510 [INFO] app.handlers.support:93 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:26:18,511 [INFO] root:27 - [Support] Found 0 tickets for message_id=2118
2025-04-18 02:26:18,512 [WARNING] root:40 - [Support] No open ticket found for message_id=2118
2025-04-18 02:26:18,512 [WARNING] app.handlers.support:97 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:26:18,928 [INFO] aiogram.event:172 - Update id=872171216 is handled. Duration 425 ms by bot id=7299087266
2025-04-18 02:27:41,919 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:27:42,183 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:27:42,184 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:27:42,185 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:28:41,517 [INFO] root:40 - Logging system initialized
2025-04-18 02:28:41,519 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:28:41,744 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:28:42,112 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:28:42,112 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:28:42,114 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,114 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:28:42,114 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,114 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:28:42,114 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,115 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:28:42,115 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,115 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:28:42,115 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,115 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:28:42,115 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,115 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:28:42,115 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,116 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:28:42,116 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,116 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:28:42,116 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,116 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:28:42,116 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,116 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:28:42,116 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,117 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:28:42,117 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,117 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:28:42,118 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,118 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,118 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,118 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,118 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,119 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,119 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,119 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,119 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,119 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,120 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,120 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:28:42,120 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:28:42,120 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:28:42,120 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:28:42,120 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:28:42,120 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:28:42,121 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:28:42,121 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:28:42,121 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:28:42,214 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:28:45,577 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:28:45,579 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:28:45,580 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:28:45,581 [INFO] app.handlers.support:90 - Replied id: 2118
2025-04-18 02:28:45,581 [INFO] app.handlers.support:93 - Admin 845102332 (@dcwscr) replied to support ticket with text
2025-04-18 02:28:45,586 [WARNING] root:31 - [Support] No open ticket found for message_id=2118
2025-04-18 02:28:45,587 [WARNING] app.handlers.support:97 - Admin 845102332 tried to reply to closed/non-existent ticket
2025-04-18 02:28:45,996 [INFO] aiogram.event:172 - Update id=872171217 is handled. Duration 477 ms by bot id=7299087266
2025-04-18 02:30:58,232 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:30:58,489 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:30:58,491 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:30:58,493 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:31:01,248 [INFO] root:40 - Logging system initialized
2025-04-18 02:31:01,249 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:31:01,458 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:31:01,846 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:31:01,846 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:31:01,848 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,848 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:31:01,849 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,849 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:31:01,849 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,849 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:31:01,850 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,850 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:31:01,850 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,850 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:31:01,851 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,851 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:31:01,851 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,851 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:31:01,852 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,852 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:31:01,852 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,852 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:31:01,852 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,853 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:31:01,853 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,853 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:31:01,853 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,854 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:31:01,855 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,855 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,855 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,855 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,856 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,856 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,856 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,856 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,856 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,857 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,857 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,857 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:31:01,857 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:31:01,858 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:31:01,858 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:31:01,858 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:31:01,858 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:31:01,859 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:31:01,859 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:31:01,859 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:31:01,955 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:31:14,908 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:31:14,910 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:31:14,912 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:31:14,912 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 02:31:15,318 [INFO] aiogram.event:172 - Update id=872171218 is handled. Duration 477 ms by bot id=7299087266
2025-04-18 02:31:21,318 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:31:21,320 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:31:21,321 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:31:21,321 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 02:31:21,539 [INFO] root:17 - [Support] New ticket from user_id=845102332, message_id=2129
2025-04-18 02:31:21,540 [INFO] app.handlers.support:63 - Support ticket created for user 845102332 (@dcwscr) with question_message_id=2129
2025-04-18 02:31:22,611 [INFO] aiogram.event:172 - Update id=872171219 is handled. Duration 1296 ms by bot id=7299087266
2025-04-18 02:31:26,373 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:31:26,375 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:31:26,376 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:31:26,381 [INFO] app.handlers.support:99 - Admin 845102332 (@dcwscr) replied to support ticket with text, question_message_id=845102332
2025-04-18 02:31:26,384 [WARNING] root:31 - [Support] No open ticket found for message_id=845102332
2025-04-18 02:31:26,385 [WARNING] app.handlers.support:103 - Admin 845102332 tried to reply to non-existent ticket with question_message_id=845102332
2025-04-18 02:31:26,596 [INFO] aiogram.event:172 - Update id=872171220 is handled. Duration 229 ms by bot id=7299087266
2025-04-18 02:32:38,620 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:32:38,886 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:32:38,888 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:32:38,890 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:32:41,702 [INFO] root:40 - Logging system initialized
2025-04-18 02:32:41,703 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:32:41,907 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:32:42,189 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:32:42,189 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:32:42,191 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,192 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:32:42,192 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,192 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:32:42,192 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,192 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:32:42,193 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,193 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:32:42,193 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,193 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:32:42,194 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,194 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:32:42,194 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,194 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:32:42,195 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,195 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:32:42,196 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,196 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:32:42,196 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,197 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:32:42,197 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,197 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:32:42,198 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,198 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:32:42,199 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,199 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,199 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,200 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,200 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,200 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,201 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,201 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,201 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,202 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,202 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,202 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:32:42,202 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:32:42,203 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:32:42,203 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:32:42,203 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:32:42,203 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:32:42,204 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:32:42,204 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:32:42,204 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:32:42,296 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:32:52,083 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:32:52,085 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:32:52,086 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:32:52,087 [INFO] app.handlers.support:99 - Admin 845102332 (@dcwscr) replied to support ticket with text, question_message_id=845102332
2025-04-18 02:32:52,088 [WARNING] root:31 - [Support] No open ticket found for message_id=845102332
2025-04-18 02:32:52,089 [WARNING] app.handlers.support:103 - Admin 845102332 tried to reply to non-existent ticket with question_message_id=845102332
2025-04-18 02:32:52,502 [INFO] aiogram.event:172 - Update id=872171221 is handled. Duration 479 ms by bot id=7299087266
2025-04-18 02:35:38,768 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:35:39,024 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:35:39,026 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:35:39,028 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:35:47,194 [INFO] root:40 - Logging system initialized
2025-04-18 02:35:47,195 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:35:47,413 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:35:47,798 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:35:47,799 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:35:47,801 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,801 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:35:47,801 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,801 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:35:47,801 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,801 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:35:47,802 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,802 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:35:47,802 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,802 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:35:47,802 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,802 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:35:47,802 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,802 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:35:47,802 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,803 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:35:47,803 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,803 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:35:47,803 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,803 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:35:47,804 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,804 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:35:47,804 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,804 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:35:47,805 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,805 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,805 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,806 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,806 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,807 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,807 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,807 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,807 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,808 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,808 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,808 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:35:47,808 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:35:47,808 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:35:47,809 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:35:47,809 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:35:47,809 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:35:47,809 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:35:47,809 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:35:47,810 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:35:47,905 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:36:02,455 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:36:02,457 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:36:02,458 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:36:02,458 [INFO] app.handlers.support:93 - Admin 845102332 (@dcwscr) replied to support ticket with text, question_message_id=2131
2025-04-18 02:36:02,460 [WARNING] root:31 - [Support] No open ticket found for message_id=2131
2025-04-18 02:36:02,461 [WARNING] app.handlers.support:97 - Admin 845102332 tried to reply to non-existent ticket with question_message_id=2131
2025-04-18 02:36:02,871 [INFO] aiogram.event:172 - Update id=872171222 is handled. Duration 477 ms by bot id=7299087266
2025-04-18 02:37:22,632 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:22,633 [INFO] root:14 - [User] Fetching user for telegram_id=7396564931
2025-04-18 02:37:23,038 [INFO] aiogram.event:172 - Update id=872171223 is handled. Duration 407 ms by bot id=7299087266
2025-04-18 02:37:26,016 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:26,235 [INFO] aiogram.event:172 - Update id=872171224 is handled. Duration 220 ms by bot id=7299087266
2025-04-18 02:37:28,001 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:28,205 [INFO] app.handlers.login:22 - User 7299087266 (@singapore_unibot) started login process
2025-04-18 02:37:28,622 [INFO] aiogram.event:172 - Update id=872171225 is handled. Duration 622 ms by bot id=7299087266
2025-04-18 02:37:32,086 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:32,086 [INFO] app.handlers.login:48 - User 7396564931 (@dcwscr3) entered login
2025-04-18 02:37:32,517 [INFO] aiogram.event:172 - Update id=872171226 is handled. Duration 434 ms by bot id=7299087266
2025-04-18 02:37:35,202 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:35,203 [INFO] app.handlers.login:68 - User 7396564931 (@dcwscr3) entered password
2025-04-18 02:37:36,404 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 02:37:36,687 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/view/students?selfId=59158 "HTTP/1.1 200 "
2025-04-18 02:37:36,689 [INFO] app.utils.schedule:45 - Successfully fetched user data for inet_id 59158
2025-04-18 02:37:36,691 [INFO] root:47 - [User] Check registration status for telegram_id=7396564931
2025-04-18 02:37:36,696 [INFO] root:77 - [User] Created user telegram_id=7396564931, group_id=232
2025-04-18 02:37:36,704 [INFO] app.handlers.login:132 - User 7396564931 (@dcwscr3) successfully registered with group_id=232
2025-04-18 02:37:37,127 [INFO] aiogram.event:172 - Update id=872171227 is handled. Duration 1927 ms by bot id=7299087266
2025-04-18 02:37:38,354 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:38,356 [INFO] root:14 - [User] Fetching user for telegram_id=7396564931
2025-04-18 02:37:38,357 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:38,357 [INFO] app.handlers.support:19 - User 7396564931 (@dcwscr3) started support conversation
2025-04-18 02:37:38,571 [INFO] aiogram.event:172 - Update id=872171228 is handled. Duration 219 ms by bot id=7299087266
2025-04-18 02:37:40,304 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:40,305 [INFO] root:14 - [User] Fetching user for telegram_id=7396564931
2025-04-18 02:37:40,306 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:37:40,307 [INFO] app.handlers.support:33 - User 7396564931 (@dcwscr3) sent text support question
2025-04-18 02:37:40,307 [ERROR] app.handlers.support:67 - Error processing support question from user 7396564931: 'NoneType' object has no attribute 'message_id'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\support.py", line 38, in handle_question
    question_message_id = message.reply_to_message.message_id
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'message_id'
2025-04-18 02:37:40,308 [INFO] aiogram.event:172 - Update id=872171229 is not handled. Duration 27 ms by bot id=7299087266
2025-04-18 02:37:40,308 [ERROR] aiogram.event:315 - Cause exception while process update id=872171229 by bot id=7299087266
KeyError: 'error'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\support.py", line 38, in handle_question
    question_message_id = message.reply_to_message.message_id
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'message_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\ignore_groups.py", line 8, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\registration_check.py", line 30, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\language.py", line 17, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\support.py", line 68, in handle_question
    await message.answer(text=LEXICON_MSG['error'][lang])
                              ~~~~~~~~~~~^^^^^^^^^
KeyError: 'error'
2025-04-18 02:38:09,080 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:38:09,335 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:38:09,337 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:38:09,342 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:38:11,854 [INFO] root:40 - Logging system initialized
2025-04-18 02:38:11,855 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:38:12,111 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:38:12,415 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:38:12,416 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:38:12,417 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,418 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:38:12,418 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,418 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:38:12,418 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,419 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:38:12,419 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,419 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:38:12,419 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,420 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:38:12,420 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,420 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:38:12,420 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,421 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:38:12,421 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,421 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:38:12,421 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,421 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:38:12,422 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,422 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:38:12,422 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,422 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:38:12,422 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,423 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:38:12,423 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,423 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,423 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,424 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,424 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,424 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,424 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,425 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,425 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,425 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,425 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,426 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:38:12,426 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:38:12,426 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:38:12,426 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:38:12,427 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:38:12,427 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:38:12,427 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:38:12,427 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:38:12,428 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:38:12,526 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:38:18,354 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:38:18,356 [INFO] root:14 - [User] Fetching user for telegram_id=7396564931
2025-04-18 02:38:18,358 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:38:18,358 [INFO] app.handlers.support:19 - User 7396564931 (@dcwscr3) started support conversation
2025-04-18 02:38:18,796 [INFO] aiogram.event:172 - Update id=872171230 is handled. Duration 618 ms by bot id=7299087266
2025-04-18 02:38:21,618 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:38:21,619 [INFO] root:14 - [User] Fetching user for telegram_id=7396564931
2025-04-18 02:38:21,621 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:38:21,621 [INFO] app.handlers.support:33 - User 7396564931 (@dcwscr3) sent text support question
2025-04-18 02:38:21,856 [INFO] root:17 - [Support] New ticket from user_id=7396564931, message_id=2156
2025-04-18 02:38:21,857 [INFO] app.handlers.support:63 - Support ticket created for user 7396564931 (@dcwscr3) with question_message_id=2156
2025-04-18 02:38:23,159 [INFO] aiogram.event:172 - Update id=872171231 is handled. Duration 1544 ms by bot id=7299087266
2025-04-18 02:38:32,466 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:38:32,467 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:38:32,469 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:38:32,469 [INFO] app.handlers.support:90 - Replied id: 2158
2025-04-18 02:38:32,469 [INFO] app.handlers.support:94 - Admin 845102332 (@dcwscr) replied to support ticket with text, question_message_id=2158
2025-04-18 02:38:32,471 [WARNING] root:31 - [Support] No open ticket found for message_id=2158
2025-04-18 02:38:32,472 [WARNING] app.handlers.support:98 - Admin 845102332 tried to reply to non-existent ticket with question_message_id=2158
2025-04-18 02:38:32,686 [INFO] aiogram.event:172 - Update id=872171232 is handled. Duration 223 ms by bot id=7299087266
2025-04-18 02:42:50,241 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:42:50,498 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:42:50,498 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:42:50,500 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:42:54,841 [INFO] root:40 - Logging system initialized
2025-04-18 02:42:54,842 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:42:55,047 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:42:55,430 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:42:55,431 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:42:55,433 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,433 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:42:55,434 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,434 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:42:55,434 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,434 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:42:55,435 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,435 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:42:55,435 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,435 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:42:55,436 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,436 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:42:55,436 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,436 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:42:55,437 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,437 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:42:55,437 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,437 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:42:55,437 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,437 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:42:55,438 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,438 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:42:55,438 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,438 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:42:55,439 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,439 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,441 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,441 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,441 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,441 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,441 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,442 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:42:55,442 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:42:55,442 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:42:55,442 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:42:55,443 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:42:55,443 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:42:55,443 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:42:55,443 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:42:55,444 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:42:55,543 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:43:01,422 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:01,425 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:43:01,426 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:01,427 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 02:43:01,831 [INFO] aiogram.event:172 - Update id=872171233 is handled. Duration 582 ms by bot id=7299087266
2025-04-18 02:43:03,559 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:03,560 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:43:03,561 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:03,562 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 02:43:03,785 [INFO] root:17 - [Support] New ticket from user_id=845102332, message_id=2168
2025-04-18 02:43:03,785 [INFO] app.handlers.support:62 - Support ticket created for user 845102332 (@dcwscr) with message_id=2168
2025-04-18 02:43:04,852 [INFO] aiogram.event:172 - Update id=872171234 is handled. Duration 1295 ms by bot id=7299087266
2025-04-18 02:43:12,394 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:12,396 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:43:12,397 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:12,397 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text, message_id=2169
2025-04-18 02:43:12,399 [WARNING] root:31 - [Support] No open ticket found for message_id=2169
2025-04-18 02:43:12,400 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to non-existent ticket with message_id=2169
2025-04-18 02:43:12,606 [INFO] aiogram.event:172 - Update id=872171235 is handled. Duration 215 ms by bot id=7299087266
2025-04-18 02:43:37,124 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:43:37,126 [INFO] root:14 - [User] Fetching user for telegram_id=7396564931
2025-04-18 02:43:37,127 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:43:37,128 [INFO] app.handlers.support:19 - User 7396564931 (@dcwscr3) started support conversation
2025-04-18 02:43:37,535 [INFO] aiogram.event:172 - Update id=872171236 is handled. Duration 412 ms by bot id=7299087266
2025-04-18 02:43:39,177 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:43:39,179 [INFO] root:14 - [User] Fetching user for telegram_id=7396564931
2025-04-18 02:43:39,180 [INFO] root:25 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 02:43:39,180 [INFO] app.handlers.support:33 - User 7396564931 (@dcwscr3) sent text support question
2025-04-18 02:43:39,408 [INFO] root:17 - [Support] New ticket from user_id=7396564931, message_id=2179
2025-04-18 02:43:39,409 [INFO] app.handlers.support:62 - Support ticket created for user 7396564931 (@dcwscr3) with message_id=2179
2025-04-18 02:43:40,515 [INFO] aiogram.event:172 - Update id=872171237 is handled. Duration 1341 ms by bot id=7299087266
2025-04-18 02:43:45,744 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:45,745 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:43:45,747 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:43:45,747 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text, message_id=2180
2025-04-18 02:43:45,748 [WARNING] root:31 - [Support] No open ticket found for message_id=2180
2025-04-18 02:43:45,749 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to non-existent ticket with message_id=2180
2025-04-18 02:43:45,965 [INFO] aiogram.event:172 - Update id=872171238 is handled. Duration 223 ms by bot id=7299087266
2025-04-18 02:47:00,348 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 02:47:00,605 [INFO] __main__:46 - Shutting down bot...
2025-04-18 02:47:00,607 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:47:00,610 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 02:47:03,338 [INFO] root:40 - Logging system initialized
2025-04-18 02:47:03,339 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 02:47:03,550 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 02:47:03,940 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 02:47:03,941 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 02:47:03,943 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,943 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 02:47:03,943 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,943 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 02:47:03,944 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,944 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 02:47:03,944 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,944 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 02:47:03,944 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,944 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 02:47:03,945 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,945 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 02:47:03,945 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,945 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 02:47:03,945 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,946 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 02:47:03,946 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,946 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 02:47:03,946 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,946 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 02:47:03,947 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,947 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 02:47:03,947 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,947 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 02:47:03,948 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,948 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,949 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,949 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,949 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,949 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,949 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,949 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,950 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,950 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,950 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,950 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 02:47:03,950 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:47:03,950 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 02:47:03,951 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 02:47:03,951 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 02:47:03,951 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 02:47:03,951 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 02:47:03,952 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 02:47:03,952 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 02:47:04,049 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 02:47:06,665 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:47:06,667 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:47:06,668 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:47:06,669 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 02:47:07,082 [INFO] aiogram.event:172 - Update id=872171239 is handled. Duration 487 ms by bot id=7299087266
2025-04-18 02:47:12,217 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:47:12,219 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:47:12,220 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:47:12,221 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 02:47:12,448 [INFO] root:18 - [Support] New ticket from user_id=845102332, message_id=2190
2025-04-18 02:47:12,448 [INFO] app.handlers.support:62 - Support ticket created for user 845102332 (@dcwscr) with message_id=2190
2025-04-18 02:47:13,519 [INFO] aiogram.event:172 - Update id=872171240 is handled. Duration 1304 ms by bot id=7299087266
2025-04-18 02:47:18,054 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:47:18,055 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 02:47:18,056 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 02:47:18,056 [INFO] app.handlers.support:91 - Admin 845102332 (@dcwscr) replied to support ticket with text, message_id=2191
2025-04-18 02:47:18,059 [WARNING] root:32 - [Support] No open ticket found for message_id=2191
2025-04-18 02:47:18,059 [WARNING] app.handlers.support:95 - Admin 845102332 tried to reply to non-existent ticket with message_id=2191
2025-04-18 02:47:18,270 [INFO] aiogram.event:172 - Update id=872171241 is handled. Duration 220 ms by bot id=7299087266
2025-04-18 03:01:30,033 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 03:01:30,298 [INFO] __main__:46 - Shutting down bot...
2025-04-18 03:01:30,300 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:01:30,303 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 03:01:32,958 [INFO] root:40 - Logging system initialized
2025-04-18 03:01:32,960 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 03:01:33,209 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 03:01:33,576 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 03:01:33,576 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 03:01:33,578 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,579 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 03:01:33,579 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,579 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 03:01:33,580 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,580 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 03:01:33,580 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,580 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 03:01:33,580 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,580 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 03:01:33,580 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,581 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 03:01:33,581 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,581 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 03:01:33,581 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,581 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 03:01:33,582 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,582 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 03:01:33,582 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,582 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 03:01:33,582 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,583 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 03:01:33,583 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,583 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 03:01:33,584 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,584 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,585 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,585 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,585 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,586 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,586 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,586 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,586 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,586 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,587 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,587 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:01:33,587 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:01:33,587 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 03:01:33,588 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:01:33,588 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 03:01:33,588 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:01:33,588 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 03:01:33,588 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 03:01:33,588 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 03:01:33,684 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:01:36,377 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:01:36,380 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:01:36,381 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:01:36,381 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 03:01:36,793 [INFO] aiogram.event:172 - Update id=872171242 is handled. Duration 481 ms by bot id=7299087266
2025-04-18 03:01:38,911 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:01:38,913 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:01:38,914 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:01:38,914 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 03:01:38,915 [ERROR] app.handlers.support:59 - Error processing support question from user 845102332: save_ticket() missing 1 required positional argument: 'admin_id'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\support.py", line 40, in handle_question
    ticket = await save_ticket(user_id=user_id, question_message_id=message.message_id)
                   ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: save_ticket() missing 1 required positional argument: 'admin_id'
2025-04-18 03:01:38,916 [INFO] aiogram.event:172 - Update id=872171243 is not handled. Duration 7 ms by bot id=7299087266
2025-04-18 03:01:38,916 [ERROR] aiogram.event:315 - Cause exception while process update id=872171243 by bot id=7299087266
KeyError: 'error'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\support.py", line 40, in handle_question
    ticket = await save_ticket(user_id=user_id, question_message_id=message.message_id)
                   ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: save_ticket() missing 1 required positional argument: 'admin_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\ignore_groups.py", line 8, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\registration_check.py", line 30, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\language.py", line 17, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\support.py", line 60, in handle_question
    await message.answer(text=LEXICON_MSG['error'][lang])
                              ~~~~~~~~~~~^^^^^^^^^
KeyError: 'error'
2025-04-18 03:01:44,871 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 03:01:45,124 [INFO] __main__:46 - Shutting down bot...
2025-04-18 03:01:45,125 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:01:45,126 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 03:03:51,049 [INFO] root:40 - Logging system initialized
2025-04-18 03:03:51,050 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 03:03:51,274 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 03:03:51,670 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 03:03:51,671 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 03:03:51,672 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,673 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 03:03:51,673 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,673 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 03:03:51,673 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,674 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 03:03:51,674 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,674 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 03:03:51,675 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,675 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 03:03:51,675 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,675 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 03:03:51,676 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,676 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 03:03:51,676 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,677 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 03:03:51,677 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,677 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 03:03:51,677 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,677 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 03:03:51,678 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,678 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 03:03:51,678 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,678 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 03:03:51,679 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,679 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,680 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,680 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,680 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,680 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,681 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,681 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,681 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,682 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,682 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,682 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:03:51,682 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:03:51,683 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 03:03:51,683 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:03:51,683 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 03:03:51,683 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:03:51,684 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 03:03:51,684 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 03:03:51,684 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 03:03:51,793 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:04:39,080 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 03:04:39,337 [INFO] __main__:46 - Shutting down bot...
2025-04-18 03:04:39,339 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:04:39,341 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 03:04:42,065 [INFO] root:40 - Logging system initialized
2025-04-18 03:04:42,066 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 03:04:42,276 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 03:04:42,565 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 03:04:42,566 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 03:04:42,568 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,568 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 03:04:42,568 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,568 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 03:04:42,568 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,569 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 03:04:42,569 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,569 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 03:04:42,569 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,569 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 03:04:42,570 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,570 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 03:04:42,570 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,570 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 03:04:42,570 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,570 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 03:04:42,571 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,571 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 03:04:42,571 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,571 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 03:04:42,572 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,572 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 03:04:42,572 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,572 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 03:04:42,573 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,573 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,574 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,574 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,574 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,574 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,574 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,575 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,575 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,575 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,575 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,576 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:04:42,576 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:04:42,576 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 03:04:42,576 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:04:42,577 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 03:04:42,577 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:04:42,577 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 03:04:42,577 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 03:04:42,577 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 03:04:42,672 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:04:47,135 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:04:47,135 [INFO] app.handlers.start:16 - User 845102332 (@dcwscr) started the bot with language ru
2025-04-18 03:04:47,137 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:04:47,138 [INFO] app.handlers.start:22 - User 845102332 (@dcwscr) is registered, showing main menu
2025-04-18 03:04:47,554 [INFO] aiogram.event:172 - Update id=872171244 is handled. Duration 482 ms by bot id=7299087266
2025-04-18 03:04:48,277 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:04:48,279 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:04:48,280 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:04:48,281 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 03:04:48,502 [INFO] aiogram.event:172 - Update id=872171245 is handled. Duration 227 ms by bot id=7299087266
2025-04-18 03:04:53,060 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:04:53,061 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:04:53,062 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:04:53,063 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 03:04:53,066 [INFO] root:17 - [Support] New ticket from user_id=845102332, message_id=2205
2025-04-18 03:04:53,066 [ERROR] app.handlers.support:59 - Error processing support question from user 845102332: 'NoneType' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\handlers\support.py", line 41, in handle_question
    question_id = ticket.id
                  ^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
2025-04-18 03:04:53,297 [INFO] aiogram.event:172 - Update id=872171246 is handled. Duration 262 ms by bot id=7299087266
2025-04-18 03:06:55,388 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 03:06:55,646 [INFO] __main__:46 - Shutting down bot...
2025-04-18 03:06:55,648 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:06:55,652 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 03:06:59,300 [INFO] root:40 - Logging system initialized
2025-04-18 03:06:59,301 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 03:06:59,504 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 03:06:59,796 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 03:06:59,796 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 03:06:59,799 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,799 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 03:06:59,800 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,800 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 03:06:59,800 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,801 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 03:06:59,801 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,801 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 03:06:59,802 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,802 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 03:06:59,802 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,803 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 03:06:59,803 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,803 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 03:06:59,803 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,804 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 03:06:59,804 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,804 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 03:06:59,804 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,804 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 03:06:59,805 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,805 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 03:06:59,805 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,806 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 03:06:59,806 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,807 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,807 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,807 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,808 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,808 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,808 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,808 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,809 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,809 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,809 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,809 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 03:06:59,810 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:06:59,810 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 03:06:59,811 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 03:06:59,811 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 03:06:59,811 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 03:06:59,811 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 03:06:59,812 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 03:06:59,812 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 03:06:59,908 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:07:07,327 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:07:07,329 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:07:07,331 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:07:07,331 [INFO] app.handlers.support:19 - User 845102332 (@dcwscr) started support conversation
2025-04-18 03:07:07,749 [INFO] aiogram.event:172 - Update id=872171247 is handled. Duration 489 ms by bot id=7299087266
2025-04-18 03:07:13,865 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:07:13,867 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:07:13,868 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:07:13,869 [INFO] app.handlers.support:33 - User 845102332 (@dcwscr) sent text support question
2025-04-18 03:07:13,876 [INFO] root:17 - [Support] New ticket from user_id=845102332, message_id=2209
2025-04-18 03:07:13,877 [INFO] app.handlers.support:40 - Support ticket created with ID 2209 for user 845102332
2025-04-18 03:07:15,147 [INFO] aiogram.event:172 - Update id=872171248 is handled. Duration 1284 ms by bot id=7299087266
2025-04-18 03:07:20,186 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:07:20,187 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:07:20,188 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:07:20,189 [INFO] app.handlers.support:84 - Admin 845102332 (@dcwscr) replied to question 2209 with text
2025-04-18 03:07:20,191 [INFO] root:29 - [Support] Found open ticket: id=10, status=open, user_id=845102332
2025-04-18 03:07:20,440 [INFO] root:47 - [Support] Ticket closed by admin_id=845102332 for user_id=845102332
2025-04-18 03:07:20,446 [INFO] app.handlers.support:121 - Admin 845102332 closed support ticket 2209 for user 845102332
2025-04-18 03:07:20,657 [INFO] aiogram.event:172 - Update id=872171249 is handled. Duration 476 ms by bot id=7299087266
2025-04-18 03:08:45,033 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:45,035 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:08:45,036 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:45,036 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 03:08:45,442 [INFO] aiogram.event:172 - Update id=872171250 is handled. Duration 410 ms by bot id=7299087266
2025-04-18 03:08:46,523 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:46,524 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:08:46,525 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:46,525 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 03:08:46,740 [INFO] aiogram.event:172 - Update id=872171251 is handled. Duration 219 ms by bot id=7299087266
2025-04-18 03:08:47,812 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:47,813 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:08:47,814 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:47,815 [INFO] app.handlers.main_menu:31 - User 845102332 (@dcwscr) opened inet schedule menu
2025-04-18 03:08:48,027 [INFO] aiogram.event:172 - Update id=872171252 is handled. Duration 217 ms by bot id=7299087266
2025-04-18 03:08:48,749 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:48,750 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 03:08:48,751 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 03:08:48,752 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 03:08:48,967 [INFO] aiogram.event:172 - Update id=872171253 is handled. Duration 219 ms by bot id=7299087266
2025-04-18 03:08:49,906 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 03:08:50,166 [INFO] __main__:46 - Shutting down bot...
2025-04-18 03:08:50,167 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 03:08:50,168 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 17:53:59,220 [INFO] root:40 - Logging system initialized
2025-04-18 17:53:59,223 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 17:53:59,439 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 17:53:59,867 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 17:53:59,868 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 17:53:59,876 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,876 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 17:53:59,877 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,877 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 17:53:59,877 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,878 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (entry)
2025-04-18 17:53:59,878 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,878 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 17:53:59,878 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,878 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 17:53:59,879 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,879 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 17:53:59,879 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,879 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (entry)
2025-04-18 17:53:59,879 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,880 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 17:53:59,880 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,880 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 17:53:59,880 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,881 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 17:53:59,881 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,881 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 17:53:59,881 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,881 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 17:53:59,885 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,885 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,885 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,885 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,886 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,886 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,886 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,886 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,887 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,887 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,887 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,887 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:53:59,888 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 17:53:59,888 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 17:53:59,888 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:53:59,889 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 17:53:59,889 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 17:53:59,889 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 17:53:59,889 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 17:53:59,890 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 17:54:00,001 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 17:54:22,864 [INFO] aiogram.event:172 - Update id=872171455 is not handled. Duration 16 ms by bot id=7299087266
2025-04-18 17:54:23,893 [INFO] aiogram.event:172 - Update id=872171456 is not handled. Duration 3 ms by bot id=7299087266
2025-04-18 17:54:32,062 [INFO] aiogram.event:172 - Update id=872171457 is not handled. Duration 13 ms by bot id=7299087266
2025-04-18 17:54:51,402 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 17:54:51,406 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 17:54:51,408 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 17:54:51,871 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 17:54:51.870997
2025-04-18 17:54:51,874 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 17:54:52,141 [INFO] root:122 - [Schedule] Loaded 0 lessons for 2025-04-18
2025-04-18 17:54:52,142 [WARNING] app.utils.lesson_check:100 - No schedules found for 2025-04-18
2025-04-18 17:54:52,143 [INFO] aiogram.event:172 - Update id=872171458 is handled. Duration 996 ms by bot id=7299087266
2025-04-18 17:56:28,586 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 17:56:28,856 [INFO] __main__:46 - Shutting down bot...
2025-04-18 17:56:28,859 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 17:56:28,869 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 17:58:01,422 [INFO] root:40 - Logging system initialized
2025-04-18 17:58:01,426 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 17:58:01,639 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 17:58:02,059 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 17:58:02,060 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 17:58:02,064 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,064 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 17:58:02,064 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,064 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 17:58:02,065 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,065 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 17:58:02,065 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,065 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 17:58:02,066 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,066 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 17:58:02,067 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,068 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 17:58:02,069 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,069 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 17:58:02,070 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,070 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 17:58:02,071 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,071 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 17:58:02,072 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,073 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 17:58:02,073 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,074 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 17:58:02,074 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,075 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 17:58:02,078 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,079 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,079 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,079 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,079 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,080 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,080 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,080 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,080 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,080 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,081 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,081 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 17:58:02,081 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 17:58:02,081 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 17:58:02,082 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 17:58:02,082 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 17:58:02,082 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 17:58:02,083 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 17:58:02,083 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 17:58:02,084 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 17:58:02,200 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 17:58:05,301 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 17:58:05,305 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 17:58:05,308 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 17:59:09,731 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 17:58:39.304049
2025-04-18 17:59:16,302 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:03:07,384 [INFO] root:122 - [Schedule] Loaded 0 lessons for 2025-04-18
2025-04-18 18:03:09,050 [WARNING] app.utils.lesson_check:100 - No schedules found for 2025-04-18
2025-04-18 18:03:12,198 [INFO] aiogram.event:172 - Update id=872171460 is handled. Duration 307137 ms by bot id=7299087266
2025-04-18 18:03:12,204 [ERROR] aiogram.dispatcher:219 - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-04-18 18:03:12,205 [WARNING] aiogram.dispatcher:221 - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7299087266)
2025-04-18 18:03:16,616 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 18:03:16,874 [INFO] __main__:46 - Shutting down bot...
2025-04-18 18:03:59,278 [INFO] root:40 - Logging system initialized
2025-04-18 18:03:59,280 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:03:59,496 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:03:59,903 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:03:59,904 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:03:59,911 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,912 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:03:59,915 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,916 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:03:59,917 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,917 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:03:59,918 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,918 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:03:59,919 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,919 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:03:59,920 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,920 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:03:59,920 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,920 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:03:59,920 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,920 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:03:59,921 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,922 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:03:59,923 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,923 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:03:59,924 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,924 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:03:59,928 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,929 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:03:59,932 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,934 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,935 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,935 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,937 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,937 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,938 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,939 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,939 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,940 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,941 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,942 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:03:59,943 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:03:59,944 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:03:59,944 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:03:59,945 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:03:59,945 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:03:59,946 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:03:59,947 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:03:59,948 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:04:00,053 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:04:11,228 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:04:11,230 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:04:11,231 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:04:11,231 [INFO] app.handlers.main_menu:31 - User 845102332 (@dcwscr) opened inet schedule menu
2025-04-18 18:04:11,669 [INFO] aiogram.event:172 - Update id=872171461 is handled. Duration 630 ms by bot id=7299087266
2025-04-18 18:04:13,652 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:04:13,659 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:04:13,664 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:04:13,664 [INFO] app.handlers.schedule:80 - User 845102332 (@dcwscr) requested today's schedule
2025-04-18 18:04:13,664 [INFO] app.handlers.schedule:29 - Getting schedule for user 845102332, mode=today, target_day=2025-04-17
2025-04-18 18:04:13,667 [INFO] root:72 - [User] Found group_id=232 for telegram_id=845102332
2025-04-18 18:04:13,674 [INFO] root:27 - [Cache] Schedule loaded for group_id=232, updated_at=2025-04-17 19:54:33.718108
2025-04-18 18:04:13,675 [INFO] app.handlers.schedule:45 - Cache miss for group_id=232, fetching fresh data
2025-04-18 18:04:13,697 [INFO] root:92 - [User] Credentials decrypted for telegram_id=845102332
2025-04-18 18:04:14,309 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 18:04:14,310 [INFO] app.utils.schedule:26 - Successfully obtained token for user b2305078
2025-04-18 18:04:14,770 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/student/view/schedules?from=2025-04-14&to=2025-04-20 "HTTP/1.1 200 "
2025-04-18 18:04:14,774 [INFO] app.utils.schedule:64 - Successfully fetched schedule data from 2025-04-14 to 2025-04-20
2025-04-18 18:04:14,795 [INFO] root:48 - [Cache] Schedule updated for group_id=232, week_start=2025-04-14
2025-04-18 18:04:14,798 [INFO] app.handlers.schedule:64 - Saved new schedule to cache for group_id=232
2025-04-18 18:04:15,026 [INFO] aiogram.event:172 - Update id=872171462 is handled. Duration 1376 ms by bot id=7299087266
2025-04-18 18:04:20,736 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:04:20,738 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:04:20,741 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:04:20,742 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 18:04:20,957 [INFO] aiogram.event:172 - Update id=872171463 is handled. Duration 224 ms by bot id=7299087266
2025-04-18 18:04:24,042 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 18:04:24,295 [INFO] __main__:46 - Shutting down bot...
2025-04-18 18:04:24,297 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:04:24,302 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 18:04:57,691 [INFO] root:40 - Logging system initialized
2025-04-18 18:04:57,701 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:04:57,918 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:04:58,264 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:04:58,265 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:04:58,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,268 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:04:58,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,269 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:04:58,269 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,269 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:04:58,269 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,270 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:04:58,271 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,271 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:04:58,271 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,271 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:04:58,272 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,273 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:04:58,274 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,275 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:04:58,276 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,276 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:04:58,278 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,278 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:04:58,279 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,279 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:04:58,280 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,280 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:04:58,284 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,284 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,284 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,284 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,285 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,286 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,286 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,287 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,287 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,287 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,288 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,288 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:04:58,288 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:04:58,289 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:04:58,289 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:04:58,289 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:04:58,290 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:04:58,290 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:04:58,290 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:04:58,293 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:04:58,404 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:05:02,248 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:05:02,253 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:05:02,255 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:05:08,724 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:05:07.371084
2025-04-18 18:05:15,819 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:06:46,663 [INFO] root:40 - Logging system initialized
2025-04-18 18:06:46,668 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:06:46,868 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:06:47,319 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:06:47,322 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:06:47,329 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,329 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:06:47,330 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,330 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:06:47,331 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,332 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:06:47,335 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,336 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:06:47,337 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,337 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:06:47,337 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,337 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:06:47,338 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,338 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:06:47,338 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,338 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:06:47,339 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,339 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:06:47,339 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,340 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:06:47,341 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,341 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:06:47,342 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,342 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:06:47,345 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,346 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,346 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,346 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,347 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,347 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,347 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,348 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,348 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,348 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,348 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,349 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:06:47,349 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:06:47,349 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:06:47,350 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:06:47,350 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:06:47,350 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:06:47,351 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:06:47,351 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:06:47,351 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:06:47,476 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:06:49,297 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:06:49,303 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:06:49,304 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:06:53,585 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:06:53.585135
2025-04-18 18:06:53,591 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:07:58,020 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:08:37,593 [INFO] app.utils.lesson_check:105 - Found 0 lessons to check for group_id=232
2025-04-18 18:08:37,603 [ERROR] aiogram.dispatcher:219 - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-04-18 18:08:37,603 [WARNING] aiogram.dispatcher:221 - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7299087266)
2025-04-18 18:08:37,606 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:11:14,736 [INFO] root:40 - Logging system initialized
2025-04-18 18:11:14,741 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:11:14,950 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:11:15,399 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:11:15,400 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:11:15,404 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,404 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:11:15,405 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,405 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:11:15,405 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,405 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:11:15,406 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,406 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:11:15,406 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,406 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:11:15,407 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,407 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:11:15,407 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,407 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:11:15,408 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,408 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:11:15,408 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,409 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:11:15,409 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,409 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:11:15,410 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,410 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:11:15,410 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,410 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:11:15,412 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,413 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,413 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,413 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,414 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,414 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,414 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,414 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,414 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,415 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,415 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,415 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:11:15,415 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:11:15,416 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:11:15,416 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:11:15,416 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:11:15,416 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:11:15,417 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:11:15,417 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:11:15,417 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:11:15,538 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:11:47,001 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:11:47,005 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:11:47,007 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:11:47,444 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:11:47.444879
2025-04-18 18:11:47,446 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:11:47,674 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:13:45,482 [INFO] root:40 - Logging system initialized
2025-04-18 18:13:45,486 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:13:45,687 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:13:46,135 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:13:46,136 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:13:46,146 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,146 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:13:46,147 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,147 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:13:46,147 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,148 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:13:46,148 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,148 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:13:46,149 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,149 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:13:46,150 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,151 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:13:46,152 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,152 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:13:46,153 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,153 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:13:46,154 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,154 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:13:46,155 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,155 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:13:46,156 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,156 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:13:46,157 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,157 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:13:46,163 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,163 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,164 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,164 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,164 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,165 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,165 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,165 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,166 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,166 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,166 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,166 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:13:46,167 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:13:46,167 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:13:46,168 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:13:46,168 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:13:46,168 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:13:46,168 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:13:46,169 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:13:46,169 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:13:46,286 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:13:47,717 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:13:47,721 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:13:47,724 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:13:48,191 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:13:48.191189
2025-04-18 18:13:48,192 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:13:48,415 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:15:28,573 [INFO] root:40 - Logging system initialized
2025-04-18 18:15:28,576 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:15:28,812 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:15:29,179 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:15:29,180 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:15:29,183 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,184 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:15:29,186 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,186 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:15:29,186 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,187 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:15:29,187 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,187 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:15:29,188 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,188 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:15:29,189 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,189 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:15:29,190 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,190 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:15:29,191 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,191 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:15:29,191 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,191 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:15:29,191 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,192 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:15:29,192 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,192 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:15:29,192 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,193 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:15:29,195 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,195 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,195 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,196 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,196 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,196 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,196 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,197 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,197 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,197 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,198 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,198 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:15:29,198 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:15:29,198 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:15:29,199 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:15:29,199 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:15:29,199 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:15:29,199 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:15:29,199 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:15:29,200 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:15:29,333 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:15:32,426 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:15:32,431 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:15:32,435 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:15:32,882 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:15:32.882378
2025-04-18 18:15:32,883 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:15:33,126 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:15:44,016 [WARNING] app.utils.lesson_check:51 - Lesson Web Technologies has no group_id
2025-04-18 18:21:19,262 [INFO] root:40 - Logging system initialized
2025-04-18 18:21:19,265 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:21:19,482 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:21:19,911 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:21:19,911 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:21:19,914 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,915 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:21:19,915 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,915 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:21:19,916 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,916 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:21:19,917 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,917 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:21:19,918 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,918 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:21:19,919 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,919 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:21:19,919 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,920 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:21:19,920 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,920 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:21:19,921 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,921 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:21:19,921 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,922 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:21:19,922 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,922 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:21:19,923 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,923 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:21:19,925 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,926 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,926 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,926 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,926 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,927 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,927 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,927 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,927 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,927 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,928 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,928 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:21:19,928 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:21:19,928 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:21:19,928 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:21:19,929 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:21:19,929 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:21:19,929 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:21:19,929 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:21:19,930 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:21:20,049 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:21:27,920 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:21:27,924 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:21:27,926 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:21:28,383 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:21:28.383675
2025-04-18 18:21:28,385 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:21:28,619 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:21:59,025 [WARNING] app.utils.lesson_check:51 - Lesson Web Technologies has no group_id
2025-04-18 18:23:35,837 [INFO] root:40 - Logging system initialized
2025-04-18 18:23:35,840 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:23:36,034 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:23:36,407 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:23:36,409 [INFO] app.utils.lesson_check:159 - Setting up lesson check scheduler
2025-04-18 18:23:36,416 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,417 [INFO] app.utils.lesson_check:169 - Added job for 9:35 (entry)
2025-04-18 18:23:36,418 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,418 [INFO] app.utils.lesson_check:169 - Added job for 10:55 (exit)
2025-04-18 18:23:36,419 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,419 [INFO] app.utils.lesson_check:169 - Added job for 11:5 (entry)
2025-04-18 18:23:36,420 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,421 [INFO] app.utils.lesson_check:169 - Added job for 12:25 (exit)
2025-04-18 18:23:36,421 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,421 [INFO] app.utils.lesson_check:169 - Added job for 12:35 (entry)
2025-04-18 18:23:36,422 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,422 [INFO] app.utils.lesson_check:169 - Added job for 13:55 (exit)
2025-04-18 18:23:36,422 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,423 [INFO] app.utils.lesson_check:169 - Added job for 13:5 (entry)
2025-04-18 18:23:36,424 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,424 [INFO] app.utils.lesson_check:169 - Added job for 15:25 (exit)
2025-04-18 18:23:36,425 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,425 [INFO] app.utils.lesson_check:169 - Added job for 15:35 (entry)
2025-04-18 18:23:36,426 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,426 [INFO] app.utils.lesson_check:169 - Added job for 16:55 (exit)
2025-04-18 18:23:36,427 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,427 [INFO] app.utils.lesson_check:169 - Added job for 17:5 (entry)
2025-04-18 18:23:36,428 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,428 [INFO] app.utils.lesson_check:169 - Added job for 18:25 (exit)
2025-04-18 18:23:36,432 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,432 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,433 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,433 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,433 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,433 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,434 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,434 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,434 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,435 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,435 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,435 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:23:36,435 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:23:36,435 [INFO] app.utils.lesson_check:172 - Lesson check scheduler started successfully
2025-04-18 18:23:36,436 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:23:36,436 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:23:36,436 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:23:36,436 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:23:36,437 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:23:36,438 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:23:36,553 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:23:38,283 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:23:38,287 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:23:38,289 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:23:38,772 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:23:38.772729
2025-04-18 18:23:38,774 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:23:39,012 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:24:21,237 [WARNING] app.utils.lesson_check:51 - Lesson Web Technologies has no group_id
2025-04-18 18:24:40,762 [INFO] app.utils.lesson_check:105 - Found 0 lessons to check for group_id=232
2025-04-18 18:24:40,846 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:24:53,107 [INFO] aiogram.event:172 - Update id=872171473 is handled. Duration 74923 ms by bot id=7299087266
2025-04-18 18:24:53,116 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:24:53,118 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:24:53,122 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:24:53,362 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:24:53.361980
2025-04-18 18:24:53,365 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:24:53,599 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:24:56,538 [WARNING] app.utils.lesson_check:51 - Lesson Web Technologies has no group_id
2025-04-18 18:24:58,073 [INFO] app.utils.lesson_check:105 - Found 0 lessons to check for group_id=232
2025-04-18 18:24:58,086 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:25:00,237 [INFO] aiogram.event:172 - Update id=872171474 is handled. Duration 7125 ms by bot id=7299087266
2025-04-18 18:25:00,239 [INFO] apscheduler.executors.default:179 - Running job "check_lesson_marks (trigger: cron[day_of_week='mon-sat', hour='18', minute='25'], next run at: 2025-04-19 18:25:00 +05)" (scheduled at 2025-04-18 18:25:00+05:00)
2025-04-18 18:25:00,240 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-04-18 18:25:00.240305
2025-04-18 18:25:00,243 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:25:00,470 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:25:43,212 [INFO] root:40 - Logging system initialized
2025-04-18 18:25:43,215 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:25:43,438 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:25:43,877 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:25:43,878 [INFO] app.utils.lesson_check:158 - Setting up lesson check scheduler
2025-04-18 18:25:43,881 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,882 [INFO] app.utils.lesson_check:168 - Added job for 9:35 (entry)
2025-04-18 18:25:43,882 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,882 [INFO] app.utils.lesson_check:168 - Added job for 10:55 (exit)
2025-04-18 18:25:43,882 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,882 [INFO] app.utils.lesson_check:168 - Added job for 11:5 (entry)
2025-04-18 18:25:43,883 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,883 [INFO] app.utils.lesson_check:168 - Added job for 12:25 (exit)
2025-04-18 18:25:43,883 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,883 [INFO] app.utils.lesson_check:168 - Added job for 12:35 (entry)
2025-04-18 18:25:43,884 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,884 [INFO] app.utils.lesson_check:168 - Added job for 13:55 (exit)
2025-04-18 18:25:43,884 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,884 [INFO] app.utils.lesson_check:168 - Added job for 13:5 (entry)
2025-04-18 18:25:43,885 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,885 [INFO] app.utils.lesson_check:168 - Added job for 15:25 (exit)
2025-04-18 18:25:43,885 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,885 [INFO] app.utils.lesson_check:168 - Added job for 15:35 (entry)
2025-04-18 18:25:43,885 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,886 [INFO] app.utils.lesson_check:168 - Added job for 16:55 (exit)
2025-04-18 18:25:43,886 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,886 [INFO] app.utils.lesson_check:168 - Added job for 17:5 (entry)
2025-04-18 18:25:43,886 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,886 [INFO] app.utils.lesson_check:168 - Added job for 18:25 (exit)
2025-04-18 18:25:43,888 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,889 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,889 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,889 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,889 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,891 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,891 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,891 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:25:43,891 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:25:43,891 [INFO] app.utils.lesson_check:171 - Lesson check scheduler started successfully
2025-04-18 18:25:43,892 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:25:43,892 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:25:43,892 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:25:43,892 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:25:43,892 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:25:43,893 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:25:44,000 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:25:49,527 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:25:49,530 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:25:49,532 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:25:50,004 [INFO] app.utils.lesson_check:82 - Starting lesson check at 2025-04-18 18:25:50.004191
2025-04-18 18:25:50,006 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:25:50,241 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:26:16,419 [INFO] root:97 - [Digest] Found 4 students in group_id=232 with daily_digest
2025-04-18 18:47:08,770 [INFO] root:40 - Logging system initialized
2025-04-18 18:47:08,771 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:47:08,985 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:47:09,409 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:47:09,410 [INFO] app.utils.lesson_check:158 - Setting up lesson check scheduler
2025-04-18 18:47:09,419 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,420 [INFO] app.utils.lesson_check:168 - Added job for 9:35 (entry)
2025-04-18 18:47:09,420 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,421 [INFO] app.utils.lesson_check:168 - Added job for 10:55 (exit)
2025-04-18 18:47:09,422 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,422 [INFO] app.utils.lesson_check:168 - Added job for 11:5 (entry)
2025-04-18 18:47:09,423 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,423 [INFO] app.utils.lesson_check:168 - Added job for 12:25 (exit)
2025-04-18 18:47:09,423 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,424 [INFO] app.utils.lesson_check:168 - Added job for 12:35 (entry)
2025-04-18 18:47:09,425 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,425 [INFO] app.utils.lesson_check:168 - Added job for 13:55 (exit)
2025-04-18 18:47:09,426 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,426 [INFO] app.utils.lesson_check:168 - Added job for 13:5 (entry)
2025-04-18 18:47:09,427 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,427 [INFO] app.utils.lesson_check:168 - Added job for 15:25 (exit)
2025-04-18 18:47:09,428 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,429 [INFO] app.utils.lesson_check:168 - Added job for 15:35 (entry)
2025-04-18 18:47:09,430 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,430 [INFO] app.utils.lesson_check:168 - Added job for 16:55 (exit)
2025-04-18 18:47:09,431 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,432 [INFO] app.utils.lesson_check:168 - Added job for 17:5 (entry)
2025-04-18 18:47:09,433 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,434 [INFO] app.utils.lesson_check:168 - Added job for 18:25 (exit)
2025-04-18 18:47:09,436 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,437 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,437 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,438 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,438 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,439 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,439 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,440 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:47:09,441 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:47:09,441 [INFO] app.utils.lesson_check:171 - Lesson check scheduler started successfully
2025-04-18 18:47:09,442 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:47:09,443 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:47:09,443 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:47:09,443 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:47:09,443 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:47:09,444 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:47:09,545 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:47:12,119 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:47:12,121 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:47:12,122 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:47:12,123 [INFO] app.handlers.main_menu:31 - User 845102332 (@dcwscr) opened inet schedule menu
2025-04-18 18:47:12,633 [INFO] aiogram.event:172 - Update id=872171497 is handled. Duration 684 ms by bot id=7299087266
2025-04-18 18:47:13,578 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:47:13,581 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:47:13,582 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:47:13,583 [INFO] app.handlers.schedule:80 - User 845102332 (@dcwscr) requested today's schedule
2025-04-18 18:47:13,583 [INFO] app.handlers.schedule:29 - Getting schedule for user 845102332, mode=today, target_day=2025-04-17
2025-04-18 18:47:13,584 [INFO] root:72 - [User] Found group_id=232 for telegram_id=845102332
2025-04-18 18:47:13,587 [INFO] root:24 - [Cache] No schedule found for group_id=232, week_start=2025-04-14
2025-04-18 18:47:13,588 [INFO] app.handlers.schedule:45 - Cache miss for group_id=232, fetching fresh data
2025-04-18 18:47:13,591 [INFO] root:92 - [User] Credentials decrypted for telegram_id=845102332
2025-04-18 18:47:14,155 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 18:47:14,157 [INFO] app.utils.schedule:26 - Successfully obtained token for user b2305078
2025-04-18 18:47:14,600 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/student/view/schedules?from=2025-04-14&to=2025-04-20 "HTTP/1.1 200 "
2025-04-18 18:47:14,604 [INFO] app.utils.schedule:64 - Successfully fetched schedule data from 2025-04-14 to 2025-04-20
2025-04-18 18:47:14,615 [INFO] root:56 - [Cache] New schedule inserted for group_id=232, week_start=2025-04-14
2025-04-18 18:47:14,646 [INFO] app.handlers.schedule:64 - Saved new schedule to cache for group_id=232
2025-04-18 18:47:14,911 [INFO] aiogram.event:172 - Update id=872171498 is handled. Duration 1336 ms by bot id=7299087266
2025-04-18 18:47:54,661 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 18:47:54,922 [INFO] __main__:46 - Shutting down bot...
2025-04-18 18:47:54,925 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:47:54,932 [INFO] __main__:54 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 18:48:30,813 [INFO] root:40 - Logging system initialized
2025-04-18 18:48:30,816 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 18:48:31,031 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 18:48:31,389 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 18:48:31,393 [INFO] app.utils.lesson_check:158 - Setting up lesson check scheduler
2025-04-18 18:48:31,407 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,407 [INFO] app.utils.lesson_check:168 - Added job for 9:35 (entry)
2025-04-18 18:48:31,408 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,408 [INFO] app.utils.lesson_check:168 - Added job for 10:55 (exit)
2025-04-18 18:48:31,408 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,409 [INFO] app.utils.lesson_check:168 - Added job for 11:5 (entry)
2025-04-18 18:48:31,409 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,409 [INFO] app.utils.lesson_check:168 - Added job for 12:25 (exit)
2025-04-18 18:48:31,410 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,410 [INFO] app.utils.lesson_check:168 - Added job for 12:35 (entry)
2025-04-18 18:48:31,410 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,411 [INFO] app.utils.lesson_check:168 - Added job for 13:55 (exit)
2025-04-18 18:48:31,411 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,411 [INFO] app.utils.lesson_check:168 - Added job for 13:5 (entry)
2025-04-18 18:48:31,412 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,412 [INFO] app.utils.lesson_check:168 - Added job for 15:25 (exit)
2025-04-18 18:48:31,412 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,412 [INFO] app.utils.lesson_check:168 - Added job for 15:35 (entry)
2025-04-18 18:48:31,413 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,413 [INFO] app.utils.lesson_check:168 - Added job for 16:55 (exit)
2025-04-18 18:48:31,413 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,414 [INFO] app.utils.lesson_check:168 - Added job for 17:5 (entry)
2025-04-18 18:48:31,414 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,414 [INFO] app.utils.lesson_check:168 - Added job for 18:25 (exit)
2025-04-18 18:48:31,417 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,417 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,417 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,417 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,418 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,418 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,418 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,418 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,419 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,419 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,419 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,419 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 18:48:31,419 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:48:31,420 [INFO] app.utils.lesson_check:171 - Lesson check scheduler started successfully
2025-04-18 18:48:31,420 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 18:48:31,421 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 18:48:31,421 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 18:48:31,421 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 18:48:31,421 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 18:48:31,422 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 18:48:31,557 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 18:48:35,831 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:48:35,835 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 18:48:35,837 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:48:36,309 [INFO] app.utils.lesson_check:82 - Starting lesson check at 2025-04-18 18:48:36.309333
2025-04-18 18:48:36,310 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:48:36,533 [INFO] root:122 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 18:48:36,540 [INFO] root:97 - [Digest] Found 4 students in group_id=232 with daily_digest
2025-04-18 18:50:04,018 [INFO] app.utils.lesson_check:104 - Found 0 lessons to check for group_id=232
2025-04-18 18:50:09,227 [ERROR] aiogram.dispatcher:219 - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-04-18 18:50:09,228 [WARNING] aiogram.dispatcher:221 - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7299087266)
2025-04-18 18:50:10,130 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 18:50:26,233 [INFO] aiogram.event:172 - Update id=872171499 is handled. Duration 110516 ms by bot id=7299087266
2025-04-18 18:50:27,456 [INFO] aiogram.dispatcher:233 - Connection established (tryings = 1, bot id = 7299087266)
2025-04-18 19:03:37,540 [INFO] root:40 - Logging system initialized
2025-04-18 19:03:37,543 [INFO] __main__:20 - Starting bot initialization...
2025-04-18 19:03:37,753 [INFO] __main__:26 - Deleting webhook and setting up bot...
2025-04-18 19:03:38,175 [INFO] __main__:29 - Setting up schedulers...
2025-04-18 19:03:38,175 [INFO] app.utils.lesson_check:145 - Setting up lesson check scheduler
2025-04-18 19:03:38,179 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,179 [INFO] app.utils.lesson_check:155 - Added job for 9:35 (entry)
2025-04-18 19:03:38,179 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,180 [INFO] app.utils.lesson_check:155 - Added job for 10:55 (exit)
2025-04-18 19:03:38,180 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,180 [INFO] app.utils.lesson_check:155 - Added job for 11:5 (entry)
2025-04-18 19:03:38,180 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,180 [INFO] app.utils.lesson_check:155 - Added job for 12:25 (exit)
2025-04-18 19:03:38,181 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,181 [INFO] app.utils.lesson_check:155 - Added job for 12:35 (entry)
2025-04-18 19:03:38,181 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,181 [INFO] app.utils.lesson_check:155 - Added job for 13:55 (exit)
2025-04-18 19:03:38,182 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,182 [INFO] app.utils.lesson_check:155 - Added job for 13:5 (entry)
2025-04-18 19:03:38,182 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,182 [INFO] app.utils.lesson_check:155 - Added job for 15:25 (exit)
2025-04-18 19:03:38,183 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,183 [INFO] app.utils.lesson_check:155 - Added job for 15:35 (entry)
2025-04-18 19:03:38,183 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,183 [INFO] app.utils.lesson_check:155 - Added job for 16:55 (exit)
2025-04-18 19:03:38,184 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,184 [INFO] app.utils.lesson_check:155 - Added job for 17:5 (entry)
2025-04-18 19:03:38,185 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,185 [INFO] app.utils.lesson_check:155 - Added job for 18:25 (exit)
2025-04-18 19:03:38,187 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,187 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,188 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,188 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,188 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,188 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,189 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,189 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,189 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,189 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,190 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,190 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 19:03:38,190 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 19:03:38,190 [INFO] app.utils.lesson_check:158 - Lesson check scheduler started successfully
2025-04-18 19:03:38,191 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 19:03:38,191 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 19:03:38,191 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 19:03:38,192 [INFO] __main__:33 - Setting up routers and middleware...
2025-04-18 19:03:38,192 [INFO] __main__:40 - Bot is ready to start polling...
2025-04-18 19:03:38,193 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 19:03:38,299 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 19:03:44,909 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 19:03:44,913 [INFO] root:14 - [User] Fetching user for telegram_id=845102332
2025-04-18 19:03:44,915 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 19:03:45,367 [INFO] app.utils.lesson_check:82 - Starting lesson check at 2025-04-18 19:03:45.367842
2025-04-18 19:03:45,370 [INFO] root:25 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 19:03:45,599 [INFO] root:123 - [Schedule] Loaded 2 lessons for 2025-04-18
2025-04-18 19:03:45,604 [INFO] root:97 - [Digest] Found 4 students in group_id=232 with daily_digest
2025-04-18 19:04:17,642 [INFO] app.utils.lesson_check:104 - Found 1 lessons to check for group_id=232
2025-04-18 19:04:32,605 [INFO] root:25 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:03:06,508 [INFO] root:40 - Logging system initialized
2025-04-18 20:03:06,509 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:03:06,727 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:03:07,126 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:03:07,127 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:03:07,128 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,128 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:03:07,129 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,129 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:03:07,129 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,129 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:03:07,129 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,129 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:03:07,129 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,130 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:03:07,130 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,130 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:03:07,130 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,130 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:03:07,131 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,131 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:03:07,131 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,131 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:03:07,131 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,131 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:03:07,132 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,132 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:03:07,132 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,132 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:03:07,133 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,133 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,133 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,134 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,134 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,134 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,134 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,134 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,135 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,135 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,135 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,135 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:03:07,135 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:03:07,136 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:03:07,136 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:03:07,136 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:03:07,136 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:03:07,137 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:03:07,137 [INFO] __main__:42 - Bot is ready to start polling...
2025-04-18 20:03:07,137 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:03:07,251 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:03:18,829 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:18,831 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:03:18,832 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:18,833 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:03:19,266 [INFO] aiogram.event:172 - Update id=872171512 is handled. Duration 506 ms by bot id=7299087266
2025-04-18 20:03:22,273 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:22,274 [INFO] app.handlers.start:16 - User 845102332 (@dcwscr) started the bot with language ru
2025-04-18 20:03:22,275 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:03:22,275 [INFO] app.handlers.start:22 - User 845102332 (@dcwscr) is registered, showing main menu
2025-04-18 20:03:22,489 [INFO] aiogram.event:172 - Update id=872171513 is handled. Duration 218 ms by bot id=7299087266
2025-04-18 20:03:25,075 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:25,078 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:03:25,081 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:25,302 [INFO] aiogram.event:172 - Update id=872171514 is handled. Duration 255 ms by bot id=7299087266
2025-04-18 20:03:27,091 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:27,094 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:03:27,096 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:27,096 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:03:27,318 [INFO] aiogram.event:172 - Update id=872171515 is handled. Duration 231 ms by bot id=7299087266
2025-04-18 20:03:28,670 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:28,672 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:03:28,673 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:28,674 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 20:03:28,888 [INFO] aiogram.event:172 - Update id=872171516 is handled. Duration 222 ms by bot id=7299087266
2025-04-18 20:03:30,189 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:30,192 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:03:30,193 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:03:30,194 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:03:30,418 [INFO] aiogram.event:172 - Update id=872171517 is handled. Duration 235 ms by bot id=7299087266
2025-04-18 20:06:23,253 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:06:23,518 [INFO] __main__:48 - Shutting down bot...
2025-04-18 20:06:23,521 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:06:23,527 [INFO] __main__:56 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:06:27,617 [INFO] root:40 - Logging system initialized
2025-04-18 20:06:27,618 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:06:27,828 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:06:28,261 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:06:28,261 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:06:28,265 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,266 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:06:28,266 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,266 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:06:28,267 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,267 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:06:28,267 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,267 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:06:28,267 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,267 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:06:28,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,268 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:06:28,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,268 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:06:28,268 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,269 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:06:28,269 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,270 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:06:28,270 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,271 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:06:28,271 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,271 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:06:28,272 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,272 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:06:28,273 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,273 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,273 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,274 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,274 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,276 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,277 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,277 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,278 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,279 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:06:28,279 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:06:28,279 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:06:28,279 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:06:28,280 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:06:28,280 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:06:28,280 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:06:28,281 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:06:28,281 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:06:28,390 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:06:45,248 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:06:45,250 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:06:45,251 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:06:45,252 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:06:45,682 [INFO] aiogram.event:172 - Update id=872171518 is handled. Duration 506 ms by bot id=7299087266
2025-04-18 20:06:46,963 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:06:46,967 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:06:46,969 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:06:47,187 [INFO] aiogram.event:172 - Update id=872171519 is handled. Duration 227 ms by bot id=7299087266
2025-04-18 20:06:48,532 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:06:48,534 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:06:48,535 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:06:48,761 [INFO] aiogram.event:172 - Update id=872171520 is handled. Duration 230 ms by bot id=7299087266
2025-04-18 20:07:00,972 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:00,975 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:00,976 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:00,977 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:07:01,209 [INFO] aiogram.event:172 - Update id=872171521 is handled. Duration 239 ms by bot id=7299087266
2025-04-18 20:07:03,590 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:03,592 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:03,594 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:03,594 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 20:07:03,809 [INFO] aiogram.event:172 - Update id=872171522 is handled. Duration 221 ms by bot id=7299087266
2025-04-18 20:07:04,800 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:04,802 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:04,803 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:04,803 [INFO] app.handlers.settings:145 - User 845102332 (@dcwscr) opened mailing settings
2025-04-18 20:07:04,805 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 20:07:05,081 [INFO] aiogram.event:172 - Update id=872171523 is handled. Duration 282 ms by bot id=7299087266
2025-04-18 20:07:08,973 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:08,975 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:08,977 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:08,977 [INFO] app.handlers.settings:53 - User 845102332 (@dcwscr) opened language settings
2025-04-18 20:07:09,193 [INFO] aiogram.event:172 - Update id=872171524 is handled. Duration 223 ms by bot id=7299087266
2025-04-18 20:07:10,450 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-04-18 20:07:10,451 [INFO] app.handlers.settings:129 - User 845102332 (@dcwscr) changed language to en
2025-04-18 20:07:10,454 [INFO] root:119 - [User] Updated language to 'en' for telegram_id=845102332
2025-04-18 20:07:11,154 [INFO] aiogram.event:172 - Update id=872171525 is handled. Duration 705 ms by bot id=7299087266
2025-04-18 20:07:13,655 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:13,656 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:13,658 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:13,658 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 20:07:13,872 [INFO] aiogram.event:172 - Update id=872171526 is handled. Duration 219 ms by bot id=7299087266
2025-04-18 20:07:20,519 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:20,521 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:20,522 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:20,523 [INFO] app.handlers.settings:145 - User 845102332 (@dcwscr) opened mailing settings
2025-04-18 20:07:20,524 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 20:07:20,744 [INFO] aiogram.event:172 - Update id=872171527 is handled. Duration 227 ms by bot id=7299087266
2025-04-18 20:07:44,330 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:44,331 [INFO] app.handlers.settings:167 - User 845102332 (@dcwscr) toggled daily digest
2025-04-18 20:07:44,335 [INFO] root:28 - [Settings] Toggled daily_digest for telegram_id=845102332 → False
2025-04-18 20:07:44,336 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 20:07:44,956 [INFO] aiogram.event:172 - Update id=872171528 is handled. Duration 628 ms by bot id=7299087266
2025-04-18 20:07:54,545 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:54,547 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:54,548 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:54,549 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:07:54,785 [INFO] aiogram.event:172 - Update id=872171529 is handled. Duration 246 ms by bot id=7299087266
2025-04-18 20:07:55,499 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:55,502 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:55,503 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:55,712 [INFO] aiogram.event:172 - Update id=872171530 is handled. Duration 215 ms by bot id=7299087266
2025-04-18 20:07:56,583 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:56,586 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:07:56,589 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:07:56,798 [INFO] aiogram.event:172 - Update id=872171531 is handled. Duration 218 ms by bot id=7299087266
2025-04-18 20:09:02,485 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:09:02,487 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:09:02,490 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:09:02,491 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:09:02,900 [INFO] aiogram.event:172 - Update id=872171532 is handled. Duration 445 ms by bot id=7299087266
2025-04-18 20:09:04,265 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:09:04,268 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:09:04,269 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:09:04,270 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 20:09:04,481 [INFO] aiogram.event:172 - Update id=872171533 is handled. Duration 219 ms by bot id=7299087266
2025-04-18 20:09:09,259 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:09:09,260 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:09:09,262 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:09:09,263 [INFO] app.handlers.settings:145 - User 845102332 (@dcwscr) opened mailing settings
2025-04-18 20:09:09,264 [INFO] root:14 - [Settings] Loaded settings for telegram_id=845102332
2025-04-18 20:09:09,477 [INFO] aiogram.event:172 - Update id=872171534 is handled. Duration 220 ms by bot id=7299087266
2025-04-18 20:10:57,626 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:10:57,627 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:10:57,629 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:10:57,629 [INFO] app.handlers.main_menu:46 - User 845102332 (@dcwscr) returned to main menu
2025-04-18 20:10:58,048 [INFO] aiogram.event:172 - Update id=872171535 is handled. Duration 424 ms by bot id=7299087266
2025-04-18 20:11:00,160 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:11:00,161 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:11:00,163 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:11:00,379 [INFO] aiogram.event:172 - Update id=872171536 is handled. Duration 222 ms by bot id=7299087266
2025-04-18 20:11:01,110 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:11:01,113 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:11:01,114 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:11:01,413 [INFO] aiogram.event:172 - Update id=872171537 is handled. Duration 306 ms by bot id=7299087266
2025-04-18 20:11:43,783 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:11:43,785 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:11:43,786 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:11:44,213 [INFO] aiogram.event:172 - Update id=872171538 is handled. Duration 435 ms by bot id=7299087266
2025-04-18 20:11:50,715 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:11:50,980 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:11:50,982 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:11:50,989 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:17:46,904 [INFO] root:40 - Logging system initialized
2025-04-18 20:17:46,905 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:17:47,116 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:17:47,592 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:17:47,592 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:17:47,594 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,594 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:17:47,595 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,595 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:17:47,595 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,595 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:17:47,595 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,595 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:17:47,596 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,596 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:17:47,596 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,596 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:17:47,596 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,596 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:17:47,597 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,597 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:17:47,597 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,597 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:17:47,598 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,598 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:17:47,598 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,598 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:17:47,599 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,599 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:17:47,600 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,600 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,600 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,601 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,601 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,601 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,601 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,601 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,602 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,602 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,602 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,603 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:17:47,603 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:17:47,603 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:17:47,604 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:17:47,604 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:17:47,604 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:17:47,604 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:17:47,604 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:17:47,605 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:17:47,714 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:17:51,937 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:17:52,597 [INFO] aiogram.event:172 - Update id=872171539 is handled. Duration 729 ms by bot id=7299087266
2025-04-18 20:17:56,880 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:17:56,883 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:17:56,884 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:17:57,126 [INFO] aiogram.event:172 - Update id=872171540 is handled. Duration 248 ms by bot id=7299087266
2025-04-18 20:18:02,354 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:18:02,355 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:18:02,357 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:18:03,185 [INFO] aiogram.event:172 - Update id=872171541 is handled. Duration 836 ms by bot id=7299087266
2025-04-18 20:25:36,217 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:25:36,478 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:25:36,480 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:25:36,488 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:25:42,934 [INFO] root:40 - Logging system initialized
2025-04-18 20:25:42,936 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:25:43,153 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:25:43,632 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:25:43,632 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:25:43,637 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,637 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:25:43,637 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,637 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:25:43,638 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,638 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:25:43,638 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,639 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:25:43,639 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,639 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:25:43,639 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,640 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:25:43,640 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,640 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:25:43,640 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,640 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:25:43,641 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,641 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:25:43,641 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,641 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:25:43,641 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,642 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:25:43,642 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,642 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:25:43,643 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,643 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,643 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,644 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,644 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,644 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,644 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,645 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,645 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,645 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,646 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,646 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:25:43,646 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:25:43,647 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:25:43,647 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:25:43,647 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:25:43,647 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:25:43,648 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:25:43,648 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:25:43,648 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:25:43,754 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:25:44,684 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:25:45,355 [INFO] aiogram.event:172 - Update id=872171542 is handled. Duration 745 ms by bot id=7299087266
2025-04-18 20:26:22,722 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:26:22,725 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:26:22,726 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:26:23,179 [INFO] aiogram.event:172 - Update id=872171543 is handled. Duration 460 ms by bot id=7299087266
2025-04-18 20:26:58,997 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:26:59,000 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:26:59,004 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:26:59,979 [INFO] aiogram.event:172 - Update id=872171544 is handled. Duration 996 ms by bot id=7299087266
2025-04-18 20:28:28,394 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:28:29,060 [INFO] aiogram.event:172 - Update id=872171545 is handled. Duration 668 ms by bot id=7299087266
2025-04-18 20:29:07,501 [INFO] aiogram.event:172 - Update id=872171546 is not handled. Duration 1 ms by bot id=7299087266
2025-04-18 20:29:12,062 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:29:12,064 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:29:12,065 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:29:12,487 [INFO] aiogram.event:172 - Update id=872171547 is handled. Duration 426 ms by bot id=7299087266
2025-04-18 20:29:16,119 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:29:16,121 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:29:16,122 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:29:16,776 [INFO] aiogram.event:172 - Update id=872171548 is handled. Duration 664 ms by bot id=7299087266
2025-04-18 20:29:22,804 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:29:23,241 [INFO] root:14 - [User] Fetching all users
2025-04-18 20:29:23,460 [INFO] aiogram.event:172 - Update id=872171549 is handled. Duration 658 ms by bot id=7299087266
2025-04-18 20:30:02,327 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:30:02,589 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:30:02,590 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:30:02,592 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:30:05,166 [INFO] root:40 - Logging system initialized
2025-04-18 20:30:05,167 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:30:05,374 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:30:05,693 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:30:05,694 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:30:05,699 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,700 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:30:05,701 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,702 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:30:05,703 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,704 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:30:05,705 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,706 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:30:05,707 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,708 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:30:05,709 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,709 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:30:05,711 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,712 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:30:05,714 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,715 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:30:05,716 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,716 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:30:05,717 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,717 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:30:05,717 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,717 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:30:05,718 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,719 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:30:05,720 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,720 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,720 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,721 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,721 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,721 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,721 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,721 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,722 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,722 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,722 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,723 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:30:05,723 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:30:05,724 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:30:05,725 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:30:05,726 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:30:05,726 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:30:05,727 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:30:05,727 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:30:05,728 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:30:05,843 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:30:07,520 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:30:07,523 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:30:07,524 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:30:07,958 [INFO] aiogram.event:172 - Update id=872171550 is handled. Duration 503 ms by bot id=7299087266
2025-04-18 20:30:13,191 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:30:13,194 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:30:13,197 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:30:13,874 [INFO] aiogram.event:172 - Update id=872171551 is handled. Duration 691 ms by bot id=7299087266
2025-04-18 20:36:10,416 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:36:10,678 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:36:10,681 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:36:10,690 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:36:13,515 [INFO] root:40 - Logging system initialized
2025-04-18 20:36:13,516 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:36:13,735 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:36:14,146 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:36:14,147 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:36:14,155 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,156 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:36:14,157 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,158 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:36:14,160 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,160 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:36:14,161 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,162 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:36:14,164 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,165 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:36:14,166 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,167 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:36:14,168 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,169 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:36:14,169 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,170 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:36:14,170 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,170 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:36:14,171 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,171 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:36:14,172 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,172 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:36:14,174 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,175 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:36:14,179 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,181 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,182 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,183 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,183 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,183 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,184 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,184 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,184 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,184 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,184 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,184 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:36:14,184 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:36:14,185 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:36:14,185 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:36:14,185 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:36:14,185 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:36:14,185 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:36:14,186 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:36:14,186 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:36:14,290 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:36:20,603 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:36:21,253 [INFO] aiogram.event:172 - Update id=872171552 is handled. Duration 714 ms by bot id=7299087266
2025-04-18 20:36:21,679 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:36:21,681 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:36:21,683 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:36:21,911 [INFO] aiogram.event:172 - Update id=872171553 is handled. Duration 235 ms by bot id=7299087266
2025-04-18 20:36:24,792 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:36:24,794 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:36:24,797 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:36:25,484 [INFO] aiogram.event:172 - Update id=872171554 is handled. Duration 701 ms by bot id=7299087266
2025-04-18 20:36:29,649 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:36:29,879 [INFO] root:14 - [User] Fetching all users
2025-04-18 20:36:30,311 [INFO] aiogram.event:172 - Update id=872171555 is handled. Duration 664 ms by bot id=7299087266
2025-04-18 20:36:49,935 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:36:50,194 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:36:50,197 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:36:50,205 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:38:29,584 [INFO] root:40 - Logging system initialized
2025-04-18 20:38:29,585 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:38:29,792 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:38:30,201 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:38:30,201 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:38:30,203 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,204 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:38:30,204 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,204 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:38:30,205 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,205 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:38:30,205 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,205 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:38:30,205 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,206 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:38:30,206 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,206 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:38:30,206 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,206 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:38:30,207 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,207 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:38:30,208 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,208 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:38:30,209 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,209 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:38:30,210 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,210 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:38:30,211 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,211 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:38:30,212 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,213 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,213 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,213 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,214 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,214 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,214 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,214 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,215 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,215 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,215 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,215 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:38:30,215 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:38:30,215 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:38:30,216 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:38:30,216 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:38:30,216 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:38:30,216 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:38:30,216 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:38:30,217 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:38:30,322 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:38:32,590 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:38:32,592 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:38:32,593 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:38:32,593 [INFO] app.admin.broadcats:34 - Admin 845102332 initiated a broadcast
2025-04-18 20:38:33,042 [INFO] aiogram.event:172 - Update id=872171556 is handled. Duration 622 ms by bot id=7299087266
2025-04-18 20:38:36,317 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:38:36,319 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:38:36,320 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:38:36,321 [INFO] app.admin.broadcats:46 - Admin 845102332 submitted a message for preview
2025-04-18 20:38:36,992 [INFO] aiogram.event:172 - Update id=872171557 is handled. Duration 682 ms by bot id=7299087266
2025-04-18 20:39:36,382 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:39:36,383 [INFO] app.admin.broadcats:92 - Admin 845102332 confirmed broadcast
2025-04-18 20:39:36,854 [INFO] root:14 - [User] Fetching all users
2025-04-18 20:39:36,854 [INFO] aiogram.event:172 - Update id=872171558 is not handled. Duration 476 ms by bot id=7299087266
2025-04-18 20:39:36,855 [ERROR] aiogram.event:315 - Cause exception while process update id=872171558 by bot id=7299087266
AttributeError: 'int' object has no attribute 'telegram_id'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\admin\broadcats.py", line 102, in confirm_broadcast
    chat_id=user.telegram_id,
            ^^^^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\admin_check.py", line 15, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\middleware\language.py", line 17, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\admin\broadcats.py", line 109, in confirm_broadcast
    logger.warning(f"[Admin] Failed to send message to {user.telegram_id}: {str(ex)}")
                                                ^^^^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'telegram_id'
2025-04-18 20:39:58,552 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:39:58,815 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:39:58,818 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:39:58,827 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:40:01,594 [INFO] root:40 - Logging system initialized
2025-04-18 20:40:01,595 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:40:01,810 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:40:02,130 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:40:02,131 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:40:02,134 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,134 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:40:02,135 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,135 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:40:02,135 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,135 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:40:02,136 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,136 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:40:02,136 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,136 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:40:02,137 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,137 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:40:02,138 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,138 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:40:02,138 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,138 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:40:02,139 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,139 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:40:02,139 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,140 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:40:02,140 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,140 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:40:02,140 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,140 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:40:02,141 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,141 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,141 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,142 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,142 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,142 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,142 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,142 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,142 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,142 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,143 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,143 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:40:02,143 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:40:02,143 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:40:02,143 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:40:02,144 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:40:02,144 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:40:02,144 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:40:02,144 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:40:02,145 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:40:02,249 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:40:05,190 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:40:05,192 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:40:05,193 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:40:05,194 [INFO] app.admin.broadcats:34 - [Admin] Admin 845102332 initiated a broadcast
2025-04-18 20:40:05,636 [INFO] aiogram.event:172 - Update id=872171559 is handled. Duration 509 ms by bot id=7299087266
2025-04-18 20:40:07,886 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:40:07,888 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:40:07,890 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:40:07,890 [INFO] app.admin.broadcats:46 - [Admin] Admin 845102332 submitted a message for preview
2025-04-18 20:40:08,718 [INFO] aiogram.event:172 - Update id=872171560 is handled. Duration 840 ms by bot id=7299087266
2025-04-18 20:40:10,325 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:40:10,326 [INFO] app.admin.broadcats:92 - [Admin] Admin 845102332 confirmed broadcast
2025-04-18 20:40:10,608 [INFO] root:14 - [User] Fetching all users
2025-04-18 20:40:11,651 [INFO] app.admin.broadcats:111 - [Admin] Broadcast finished by admin 845102332: 4 sent, 0 failed
2025-04-18 20:40:12,187 [INFO] aiogram.event:172 - Update id=872171561 is handled. Duration 1864 ms by bot id=7299087266
2025-04-18 20:40:23,005 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:40:23,266 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:40:23,269 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:40:23,277 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:41:02,196 [INFO] root:40 - Logging system initialized
2025-04-18 20:41:02,198 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:41:02,407 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:41:02,973 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:41:02,974 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:41:02,975 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,975 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:41:02,976 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,976 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:41:02,976 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,976 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:41:02,976 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,976 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:41:02,976 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,977 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:41:02,977 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,977 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:41:02,977 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,977 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:41:02,977 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,977 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:41:02,977 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,977 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:41:02,978 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,978 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:41:02,978 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,978 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:41:02,978 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,978 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:41:02,979 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,979 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,979 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,979 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,980 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,980 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,980 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,980 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,980 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,980 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,981 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,981 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:41:02,981 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:41:02,981 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:41:02,981 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:41:02,982 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:41:02,982 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:41:02,982 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:41:02,982 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:41:02,982 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:41:03,080 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:41:28,788 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:28,788 [INFO] app.handlers.start:16 - User 647802269 (@No username) started the bot with language en
2025-04-18 20:41:28,790 [INFO] root:22 - [User] Fetching user for telegram_id=647802269
2025-04-18 20:41:28,790 [INFO] app.handlers.start:22 - User 647802269 (@No username) is registered, showing main menu
2025-04-18 20:41:29,246 [INFO] aiogram.event:172 - Update id=872171562 is handled. Duration 530 ms by bot id=7299087266
2025-04-18 20:41:30,500 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:30,502 [INFO] root:22 - [User] Fetching user for telegram_id=647802269
2025-04-18 20:41:30,504 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:30,505 [INFO] app.handlers.main_menu:31 - User 647802269 (@No username) opened inet schedule menu
2025-04-18 20:41:30,724 [INFO] aiogram.event:172 - Update id=872171563 is handled. Duration 226 ms by bot id=7299087266
2025-04-18 20:41:33,298 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:33,300 [INFO] root:22 - [User] Fetching user for telegram_id=647802269
2025-04-18 20:41:33,301 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:33,302 [INFO] app.handlers.schedule:119 - User 647802269 (@No username) requested attendance
2025-04-18 20:41:33,305 [INFO] root:100 - [User] Credentials decrypted for telegram_id=647802269
2025-04-18 20:41:34,019 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-04-18 20:41:34,023 [INFO] app.utils.schedule:26 - Successfully obtained token for user B2303755
2025-04-18 20:41:34,031 [INFO] root:45 - [User] Attendance data for telegram_id=647802269
2025-04-18 20:41:34,366 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/students/attendances?page=0&perPage=10&direction=ASC&sortBy=id&semesterId=242&studentId=56983 "HTTP/1.1 200 "
2025-04-18 20:41:34,369 [INFO] app.utils.schedule:127 - Successfully fetched attendance data for user 647802269
2025-04-18 20:41:34,591 [INFO] aiogram.event:172 - Update id=872171564 is handled. Duration 1296 ms by bot id=7299087266
2025-04-18 20:41:36,616 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:36,618 [INFO] root:22 - [User] Fetching user for telegram_id=647802269
2025-04-18 20:41:36,621 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:36,621 [INFO] app.handlers.main_menu:46 - User 647802269 (@No username) returned to main menu
2025-04-18 20:41:36,836 [INFO] aiogram.event:172 - Update id=872171565 is handled. Duration 225 ms by bot id=7299087266
2025-04-18 20:41:38,904 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:38,906 [INFO] root:22 - [User] Fetching user for telegram_id=647802269
2025-04-18 20:41:38,907 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:38,908 [INFO] app.handlers.settings:21 - User 647802269 (@No username) opened settings menu
2025-04-18 20:41:39,163 [INFO] aiogram.event:172 - Update id=872171566 is handled. Duration 261 ms by bot id=7299087266
2025-04-18 20:41:41,556 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:41,560 [INFO] root:22 - [User] Fetching user for telegram_id=647802269
2025-04-18 20:41:41,563 [INFO] root:33 - [User] Getting language for telegram_id=647802269 → en
2025-04-18 20:41:41,564 [INFO] app.handlers.settings:145 - User 647802269 (@No username) opened mailing settings
2025-04-18 20:41:41,568 [INFO] root:14 - [Settings] Loaded settings for telegram_id=647802269
2025-04-18 20:41:41,839 [INFO] aiogram.event:172 - Update id=872171567 is handled. Duration 291 ms by bot id=7299087266
2025-04-18 20:41:42,975 [INFO] root:33 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 20:41:42,976 [INFO] app.handlers.start:16 - User 7396564931 (@dcwscr3) started the bot with language en
2025-04-18 20:41:42,977 [INFO] root:22 - [User] Fetching user for telegram_id=7396564931
2025-04-18 20:41:42,978 [INFO] app.handlers.start:22 - User 7396564931 (@dcwscr3) is registered, showing main menu
2025-04-18 20:41:43,203 [INFO] aiogram.event:172 - Update id=872171568 is handled. Duration 230 ms by bot id=7299087266
2025-04-18 20:41:52,157 [INFO] root:33 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 20:41:52,158 [INFO] root:22 - [User] Fetching user for telegram_id=7396564931
2025-04-18 20:41:52,159 [INFO] root:33 - [User] Getting language for telegram_id=7396564931 → en
2025-04-18 20:41:52,160 [INFO] aiogram.event:172 - Update id=872171569 is handled. Duration 6 ms by bot id=7299087266
2025-04-18 20:42:03,292 [INFO] aiogram.event:172 - Update id=872171570 is not handled. Duration 3 ms by bot id=7299087266
2025-04-18 20:42:05,002 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:42:05,261 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:42:05,263 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:42:05,266 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-18 20:46:13,265 [INFO] root:40 - Logging system initialized
2025-04-18 20:46:13,266 [INFO] __main__:21 - Starting bot initialization...
2025-04-18 20:46:13,481 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-18 20:46:13,956 [INFO] __main__:30 - Setting up schedulers...
2025-04-18 20:46:13,956 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-18 20:46:13,958 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,958 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-18 20:46:13,959 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,959 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-18 20:46:13,959 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,959 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-18 20:46:13,959 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,959 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-18 20:46:13,959 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,959 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-18 20:46:13,960 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,960 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-18 20:46:13,960 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,960 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-18 20:46:13,960 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,960 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-18 20:46:13,960 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,960 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-18 20:46:13,961 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,961 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-18 20:46:13,961 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,961 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-18 20:46:13,961 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,961 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-18 20:46:13,962 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,962 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,963 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,963 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,963 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,963 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,963 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,963 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,963 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,964 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,964 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,964 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-18 20:46:13,964 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:46:13,964 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-18 20:46:13,964 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-18 20:46:13,965 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-18 20:46:13,965 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-18 20:46:13,965 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-18 20:46:13,965 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-18 20:46:13,965 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-18 20:46:14,064 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:46:30,219 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:46:30,889 [INFO] app.handlers.start:21 - User 845102332 (@dcwscr) started the bot with language en
2025-04-18 20:46:30,892 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:46:30,893 [INFO] app.handlers.start:27 - User 845102332 (@dcwscr) is registered, showing main menu
2025-04-18 20:46:31,167 [INFO] aiogram.event:172 - Update id=872171572 is handled. Duration 1009 ms by bot id=7299087266
2025-04-18 20:46:45,297 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:46:45,300 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-18 20:46:45,302 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-18 20:46:45,303 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-04-18 20:46:45,530 [INFO] aiogram.event:172 - Update id=872171573 is handled. Duration 238 ms by bot id=7299087266
2025-04-18 20:46:51,520 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-18 20:46:51,777 [INFO] __main__:49 - Shutting down bot...
2025-04-18 20:46:51,781 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'CIS BOT'
2025-04-18 20:46:51,787 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-20 00:16:19,365 [INFO] root:40 - Logging system initialized
2025-04-20 00:16:19,367 [INFO] __main__:21 - Starting bot initialization...
2025-04-20 00:16:19,592 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-20 00:16:20,013 [INFO] __main__:30 - Setting up schedulers...
2025-04-20 00:16:20,013 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-20 00:16:20,024 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,025 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-20 00:16:20,025 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,025 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-20 00:16:20,026 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,026 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-20 00:16:20,026 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,026 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-20 00:16:20,027 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,027 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-20 00:16:20,027 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,027 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-20 00:16:20,028 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,028 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-20 00:16:20,028 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,028 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-20 00:16:20,029 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,029 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-20 00:16:20,029 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,029 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-20 00:16:20,030 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,030 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-20 00:16:20,030 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,031 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-20 00:16:20,034 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,034 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,034 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,034 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,034 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,034 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,035 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,035 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,035 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,035 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,036 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,036 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:16:20,036 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:16:20,036 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-20 00:16:20,036 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:16:20,037 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-20 00:16:20,037 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:16:20,037 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-20 00:16:20,037 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-20 00:16:20,038 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-20 00:16:20,135 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:16:51,799 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:16:51,803 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-20 00:16:51,804 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:16:51,804 [INFO] app.handlers.main_menu:16 - User 845102332 (@dcwscr) requested main menu
2025-04-20 00:16:52,240 [INFO] aiogram.event:172 - Update id=872171829 is handled. Duration 633 ms by bot id=7299087266
2025-04-20 00:16:53,510 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:16:53,511 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-20 00:16:53,513 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:16:53,514 [INFO] app.admin.admin:30 - [Admin] Admin 845102332 opened admin panel
2025-04-20 00:16:53,730 [INFO] aiogram.event:172 - Update id=872171830 is handled. Duration 223 ms by bot id=7299087266
2025-04-20 00:16:55,271 [INFO] aiogram.event:172 - Update id=872171831 is not handled. Duration 3 ms by bot id=7299087266
2025-04-20 00:17:32,377 [INFO] aiogram.event:172 - Update id=872171832 is not handled. Duration 7 ms by bot id=7299087266
2025-04-20 00:17:33,653 [INFO] aiogram.event:172 - Update id=872171833 is not handled. Duration 2 ms by bot id=7299087266
2025-04-20 00:17:35,787 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-20 00:17:36,038 [INFO] __main__:49 - Shutting down bot...
2025-04-20 00:17:36,039 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:17:36,041 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-20 00:18:05,530 [INFO] root:40 - Logging system initialized
2025-04-20 00:18:05,531 [INFO] __main__:21 - Starting bot initialization...
2025-04-20 00:18:05,737 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-20 00:18:06,062 [INFO] __main__:30 - Setting up schedulers...
2025-04-20 00:18:06,063 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-20 00:18:06,066 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,066 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-20 00:18:06,067 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,067 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-20 00:18:06,067 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,068 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-20 00:18:06,068 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,068 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-20 00:18:06,069 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,069 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-20 00:18:06,069 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,069 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-20 00:18:06,070 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,070 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-20 00:18:06,071 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,071 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-20 00:18:06,072 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,072 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-20 00:18:06,072 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,072 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-20 00:18:06,073 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,073 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-20 00:18:06,073 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,073 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-20 00:18:06,074 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,074 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,074 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,075 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,075 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,075 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,075 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,075 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,076 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,076 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,076 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,077 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:18:06,077 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:18:06,078 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-20 00:18:06,079 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:18:06,079 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-20 00:18:06,079 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:18:06,079 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-20 00:18:06,079 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-20 00:18:06,080 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-20 00:18:06,181 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:18:15,609 [INFO] aiogram.event:172 - Update id=872171834 is not handled. Duration 2 ms by bot id=7299087266
2025-04-20 00:18:18,733 [INFO] aiogram.event:172 - Update id=872171835 is not handled. Duration 5 ms by bot id=7299087266
2025-04-20 00:19:36,295 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-20 00:19:36,547 [INFO] __main__:49 - Shutting down bot...
2025-04-20 00:19:36,549 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:19:36,552 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-20 00:19:39,376 [INFO] root:40 - Logging system initialized
2025-04-20 00:19:39,377 [INFO] __main__:21 - Starting bot initialization...
2025-04-20 00:19:39,579 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-20 00:19:39,900 [INFO] __main__:30 - Setting up schedulers...
2025-04-20 00:19:39,901 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-20 00:19:39,903 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,903 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-20 00:19:39,904 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,904 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-20 00:19:39,905 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,905 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-20 00:19:39,905 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,905 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-20 00:19:39,905 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,905 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-20 00:19:39,905 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,905 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-20 00:19:39,906 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,906 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-20 00:19:39,906 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,906 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-20 00:19:39,907 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,907 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-20 00:19:39,908 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,909 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-20 00:19:39,910 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,910 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-20 00:19:39,910 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,911 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-20 00:19:39,912 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,912 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,912 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,913 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,913 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,913 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,914 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,914 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,915 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,915 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,916 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,917 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:19:39,918 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:19:39,919 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-20 00:19:39,921 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:19:39,921 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-20 00:19:39,922 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:19:39,922 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-20 00:19:39,923 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-20 00:19:39,923 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-20 00:19:40,031 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:19:41,027 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:19:41,028 [INFO] app.admin.admin:51 - [Admin] Admin 7299087266 initiated a stats request
2025-04-20 00:19:41,039 [INFO] app.db.crud.stats:15 - [Stats] Total users: 4
2025-04-20 00:19:41,043 [INFO] app.db.crud.stats:26 - [Stats] New users in last 7 days: 2
2025-04-20 00:19:41,044 [INFO] app.db.crud.stats:26 - [Stats] New users in last 1 days: 0
2025-04-20 00:19:41,047 [INFO] app.db.crud.stats:36 - [Stats] Users with today's digest: 4
2025-04-20 00:19:41,049 [INFO] app.db.crud.stats:46 - [Stats] Users with daily digest: 3
2025-04-20 00:19:41,051 [INFO] app.db.crud.stats:56 - [Stats] User language distribution: {'ru': 1, 'en': 3}
2025-04-20 00:19:41,501 [INFO] aiogram.event:172 - Update id=872171836 is handled. Duration 536 ms by bot id=7299087266
2025-04-20 00:20:13,879 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-20 00:20:14,144 [INFO] __main__:49 - Shutting down bot...
2025-04-20 00:20:14,146 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:20:14,148 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-20 00:22:54,231 [INFO] root:40 - Logging system initialized
2025-04-20 00:22:54,232 [INFO] __main__:21 - Starting bot initialization...
2025-04-20 00:22:54,432 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-20 00:22:54,890 [INFO] __main__:30 - Setting up schedulers...
2025-04-20 00:22:54,890 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-20 00:22:54,893 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,893 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-20 00:22:54,894 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,894 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-20 00:22:54,895 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,895 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-20 00:22:54,896 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,897 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-20 00:22:54,898 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,898 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-20 00:22:54,899 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,900 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-20 00:22:54,901 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,901 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-20 00:22:54,902 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,903 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-20 00:22:54,904 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,904 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-20 00:22:54,905 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,906 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-20 00:22:54,907 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,907 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-20 00:22:54,908 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,909 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-20 00:22:54,911 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,911 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,912 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,912 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,912 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,913 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,914 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,914 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,915 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,915 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,916 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,916 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:22:54,917 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:22:54,917 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-20 00:22:54,918 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:22:54,918 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-20 00:22:54,919 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:22:54,919 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-20 00:22:54,920 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-20 00:22:54,920 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-20 00:22:55,030 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:22:56,256 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:22:56,260 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-04-20 00:22:56,261 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:22:56,261 [INFO] app.admin.admin:30 - [Admin] Admin 845102332 opened admin panel
2025-04-20 00:22:56,709 [INFO] aiogram.event:172 - Update id=872171837 is handled. Duration 521 ms by bot id=7299087266
2025-04-20 00:22:58,102 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:22:58,102 [INFO] app.admin.admin:87 - [Admin] Admin 845102332 requested log file
2025-04-20 00:22:58,108 [ERROR] app.admin.admin:97 - [Admin] Failed to send log file to admin 845102332: 2 validation errors for SendDocument
document.is-instance[InputFile]
  Input should be an instance of InputFile [type=is_instance_of, input_value=<_io.BufferedReader name='logs/bot.log'>, input_type=BufferedReader]
    For further information visit https://errors.pydantic.dev/2.8/v/is_instance_of
document.str
  Input should be a valid string [type=string_type, input_value=<_io.BufferedReader name='logs/bot.log'>, input_type=BufferedReader]
    For further information visit https://errors.pydantic.dev/2.8/v/string_type
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\admin\admin.py", line 92, in send_logs
    await callback.message.answer_document(document=log_file, caption="📂 Лог-файл")
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\aiogram\types\message.py", line 1293, in answer_document
    return SendDocument(
           ~~~~~~~~~~~~^
        chat_id=self.chat.id,
        ^^^^^^^^^^^^^^^^^^^^^
    ...<15 lines>...
        **kwargs,
        ^^^^^^^^^
    ).as_(self._bot)
    ^
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\venv\Lib\site-packages\pydantic\main.py", line 193, in __init__
    self.__pydantic_validator__.validate_python(data, self_instance=self)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for SendDocument
document.is-instance[InputFile]
  Input should be an instance of InputFile [type=is_instance_of, input_value=<_io.BufferedReader name='logs/bot.log'>, input_type=BufferedReader]
    For further information visit https://errors.pydantic.dev/2.8/v/is_instance_of
document.str
  Input should be a valid string [type=string_type, input_value=<_io.BufferedReader name='logs/bot.log'>, input_type=BufferedReader]
    For further information visit https://errors.pydantic.dev/2.8/v/string_type
2025-04-20 00:22:58,551 [INFO] aiogram.event:172 - Update id=872171838 is handled. Duration 456 ms by bot id=7299087266
2025-04-20 00:24:00,709 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-20 00:24:00,967 [INFO] __main__:49 - Shutting down bot...
2025-04-20 00:24:00,969 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:24:00,971 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-20 00:24:06,546 [INFO] root:40 - Logging system initialized
2025-04-20 00:24:06,547 [INFO] __main__:21 - Starting bot initialization...
2025-04-20 00:24:06,746 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-20 00:24:07,069 [INFO] __main__:30 - Setting up schedulers...
2025-04-20 00:24:07,069 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-20 00:24:07,072 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,073 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-20 00:24:07,073 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,074 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-20 00:24:07,074 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,075 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-20 00:24:07,076 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,078 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-20 00:24:07,081 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,082 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-20 00:24:07,085 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,086 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-20 00:24:07,089 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,090 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-20 00:24:07,092 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,093 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-20 00:24:07,095 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,096 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-20 00:24:07,098 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,099 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-20 00:24:07,101 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,103 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-20 00:24:07,104 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,105 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-20 00:24:07,106 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,107 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,108 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,110 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,110 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,111 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,112 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,113 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,113 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,114 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,114 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,115 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:24:07,115 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:24:07,115 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-20 00:24:07,116 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:24:07,116 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-20 00:24:07,117 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:24:07,118 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-20 00:24:07,119 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-20 00:24:07,120 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-20 00:24:07,220 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:24:08,142 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:24:08,143 [INFO] app.admin.admin:88 - [Admin] Admin 845102332 requested log file
2025-04-20 00:24:08,143 [ERROR] app.admin.admin:98 - [Admin] Failed to send log file to admin 845102332: Can't instantiate abstract class InputFile without an implementation for abstract method 'read'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\admin\admin.py", line 92, in ask_for_logs
    input_file = InputFile(path_or_bytesio=log_path, filename="bot.log")
TypeError: Can't instantiate abstract class InputFile without an implementation for abstract method 'read'
2025-04-20 00:24:08,831 [INFO] aiogram.event:172 - Update id=872171839 is handled. Duration 765 ms by bot id=7299087266
2025-04-20 00:25:01,886 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-20 00:25:02,138 [INFO] __main__:49 - Shutting down bot...
2025-04-20 00:25:02,142 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:25:02,145 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-20 00:25:05,149 [INFO] root:40 - Logging system initialized
2025-04-20 00:25:05,150 [INFO] __main__:21 - Starting bot initialization...
2025-04-20 00:25:05,356 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-20 00:25:05,756 [INFO] __main__:30 - Setting up schedulers...
2025-04-20 00:25:05,756 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-20 00:25:05,760 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,760 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-20 00:25:05,760 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,760 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-20 00:25:05,761 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,761 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-20 00:25:05,761 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,761 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-20 00:25:05,761 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,762 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-20 00:25:05,762 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,762 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-20 00:25:05,763 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,763 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-20 00:25:05,763 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,763 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-20 00:25:05,763 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,763 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-20 00:25:05,764 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,764 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-20 00:25:05,764 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,764 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-20 00:25:05,764 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,764 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-20 00:25:05,765 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,765 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,765 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,765 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,765 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,766 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,766 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,766 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,766 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,766 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,767 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,767 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:25:05,767 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:25:05,767 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-20 00:25:05,767 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:25:05,767 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-20 00:25:05,768 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:25:05,768 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-20 00:25:05,768 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-20 00:25:05,768 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-20 00:25:05,870 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:25:06,828 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:25:06,829 [INFO] app.admin.admin:88 - [Admin] Admin 845102332 requested log file
2025-04-20 00:25:06,829 [ERROR] app.admin.admin:98 - [Admin] Failed to send log file to admin 845102332: type object 'InputFile' has no attribute 'from_path'
Traceback (most recent call last):
  File "C:\Users\user\Desktop\Programming\bangor_tgbot\app\admin\admin.py", line 92, in ask_for_logs
    input_file = InputFile.from_path(log_path, filename="bot.log")
                 ^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'InputFile' has no attribute 'from_path'
2025-04-20 00:25:07,488 [INFO] aiogram.event:172 - Update id=872171840 is handled. Duration 725 ms by bot id=7299087266
2025-04-20 00:26:39,725 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-20 00:26:39,982 [INFO] __main__:49 - Shutting down bot...
2025-04-20 00:26:39,985 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:26:39,989 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-04-20 00:26:42,700 [INFO] root:40 - Logging system initialized
2025-04-20 00:26:42,702 [INFO] __main__:21 - Starting bot initialization...
2025-04-20 00:26:42,911 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-04-20 00:26:43,352 [INFO] __main__:30 - Setting up schedulers...
2025-04-20 00:26:43,352 [INFO] app.utils.lesson_check:142 - Setting up lesson check scheduler
2025-04-20 00:26:43,356 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,357 [INFO] app.utils.lesson_check:152 - Added job for 9:35 (entry)
2025-04-20 00:26:43,358 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,358 [INFO] app.utils.lesson_check:152 - Added job for 10:55 (exit)
2025-04-20 00:26:43,359 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,360 [INFO] app.utils.lesson_check:152 - Added job for 11:5 (entry)
2025-04-20 00:26:43,361 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,361 [INFO] app.utils.lesson_check:152 - Added job for 12:25 (exit)
2025-04-20 00:26:43,362 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,362 [INFO] app.utils.lesson_check:152 - Added job for 12:35 (entry)
2025-04-20 00:26:43,363 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,363 [INFO] app.utils.lesson_check:152 - Added job for 13:55 (exit)
2025-04-20 00:26:43,364 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,364 [INFO] app.utils.lesson_check:152 - Added job for 13:5 (entry)
2025-04-20 00:26:43,364 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,364 [INFO] app.utils.lesson_check:152 - Added job for 15:25 (exit)
2025-04-20 00:26:43,365 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,365 [INFO] app.utils.lesson_check:152 - Added job for 15:35 (entry)
2025-04-20 00:26:43,365 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,365 [INFO] app.utils.lesson_check:152 - Added job for 16:55 (exit)
2025-04-20 00:26:43,365 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,366 [INFO] app.utils.lesson_check:152 - Added job for 17:5 (entry)
2025-04-20 00:26:43,366 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,366 [INFO] app.utils.lesson_check:152 - Added job for 18:25 (exit)
2025-04-20 00:26:43,368 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,369 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,369 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,369 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,369 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,370 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,370 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,370 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,370 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,371 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,371 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,371 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-04-20 00:26:43,371 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:26:43,371 [INFO] app.utils.lesson_check:155 - Lesson check scheduler started successfully
2025-04-20 00:26:43,372 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-20 00:26:43,372 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-04-20 00:26:43,372 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-04-20 00:26:43,372 [INFO] __main__:34 - Setting up routers and middleware...
2025-04-20 00:26:43,372 [INFO] __main__:43 - Bot is ready to start polling...
2025-04-20 00:26:43,373 [INFO] aiogram.dispatcher:527 - Start polling
2025-04-20 00:26:43,485 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:26:44,178 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-04-20 00:26:44,178 [INFO] app.admin.admin:88 - [Admin] Admin 845102332 requested log file
2025-04-20 00:26:45,632 [INFO] aiogram.event:172 - Update id=872171841 is handled. Duration 1525 ms by bot id=7299087266
2025-04-20 00:27:02,912 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-04-20 00:27:03,181 [INFO] __main__:49 - Shutting down bot...
2025-04-20 00:27:03,184 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-04-20 00:27:03,188 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-05-07 09:53:27,215 [INFO] root:40 - Logging system initialized
2025-05-07 09:53:27,221 [INFO] __main__:21 - Starting bot initialization...
2025-05-07 09:53:27,733 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-05-07 09:53:28,490 [INFO] __main__:30 - Setting up schedulers...
2025-05-07 09:53:28,490 [INFO] app.utils.lesson_check:129 - Setting up lesson check scheduler
2025-05-07 09:53:28,515 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,515 [INFO] app.utils.lesson_check:139 - Added job for 9:35 (entry)
2025-05-07 09:53:28,515 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,515 [INFO] app.utils.lesson_check:139 - Added job for 10:55 (exit)
2025-05-07 09:53:28,515 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,515 [INFO] app.utils.lesson_check:139 - Added job for 11:5 (entry)
2025-05-07 09:53:28,518 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,518 [INFO] app.utils.lesson_check:139 - Added job for 12:25 (exit)
2025-05-07 09:53:28,518 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,518 [INFO] app.utils.lesson_check:139 - Added job for 12:35 (entry)
2025-05-07 09:53:28,521 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,521 [INFO] app.utils.lesson_check:139 - Added job for 13:55 (exit)
2025-05-07 09:53:28,521 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,521 [INFO] app.utils.lesson_check:139 - Added job for 13:5 (entry)
2025-05-07 09:53:28,521 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,521 [INFO] app.utils.lesson_check:139 - Added job for 15:25 (exit)
2025-05-07 09:53:28,521 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,521 [INFO] app.utils.lesson_check:139 - Added job for 15:35 (entry)
2025-05-07 09:53:28,531 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,531 [INFO] app.utils.lesson_check:139 - Added job for 16:55 (exit)
2025-05-07 09:53:28,533 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,533 [INFO] app.utils.lesson_check:139 - Added job for 17:5 (entry)
2025-05-07 09:53:28,534 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,534 [INFO] app.utils.lesson_check:139 - Added job for 18:25 (exit)
2025-05-07 09:53:28,538 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,538 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,540 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,540 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,546 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 09:53:28,546 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 09:53:28,546 [INFO] app.utils.lesson_check:142 - Lesson check scheduler started successfully
2025-05-07 09:53:28,552 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 09:53:28,554 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-05-07 09:53:28,554 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 09:53:28,556 [INFO] __main__:34 - Setting up routers and middleware...
2025-05-07 09:53:28,556 [INFO] __main__:43 - Bot is ready to start polling...
2025-05-07 09:53:28,558 [INFO] aiogram.dispatcher:527 - Start polling
2025-05-07 09:53:28,782 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 09:53:48,369 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 09:53:48,377 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 09:53:48,380 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 09:53:48,381 [INFO] app.handlers.main_menu:31 - User 845102332 (@dcwscr) opened inet schedule menu
2025-05-07 09:53:49,083 [INFO] aiogram.event:172 - Update id=872174274 is handled. Duration 967 ms by bot id=7299087266
2025-05-07 09:53:51,667 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-05-07 09:53:51,931 [INFO] __main__:49 - Shutting down bot...
2025-05-07 09:53:51,933 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 09:53:51,937 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-05-07 10:16:55,814 [INFO] root:40 - Logging system initialized
2025-05-07 10:16:55,816 [INFO] __main__:21 - Starting bot initialization...
2025-05-07 10:16:56,355 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-05-07 10:16:57,093 [INFO] __main__:30 - Setting up schedulers...
2025-05-07 10:16:57,093 [INFO] app.utils.lesson_check:128 - Setting up lesson check scheduler
2025-05-07 10:16:57,105 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,105 [INFO] app.utils.lesson_check:138 - Added job for 9:35 (entry)
2025-05-07 10:16:57,105 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,107 [INFO] app.utils.lesson_check:138 - Added job for 10:55 (exit)
2025-05-07 10:16:57,107 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,109 [INFO] app.utils.lesson_check:138 - Added job for 11:5 (entry)
2025-05-07 10:16:57,109 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,109 [INFO] app.utils.lesson_check:138 - Added job for 12:25 (exit)
2025-05-07 10:16:57,111 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,111 [INFO] app.utils.lesson_check:138 - Added job for 12:35 (entry)
2025-05-07 10:16:57,111 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,111 [INFO] app.utils.lesson_check:138 - Added job for 13:55 (exit)
2025-05-07 10:16:57,114 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,114 [INFO] app.utils.lesson_check:138 - Added job for 13:5 (entry)
2025-05-07 10:16:57,116 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,116 [INFO] app.utils.lesson_check:138 - Added job for 15:25 (exit)
2025-05-07 10:16:57,116 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,116 [INFO] app.utils.lesson_check:138 - Added job for 15:35 (entry)
2025-05-07 10:16:57,119 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,120 [INFO] app.utils.lesson_check:138 - Added job for 16:55 (exit)
2025-05-07 10:16:57,120 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,120 [INFO] app.utils.lesson_check:138 - Added job for 17:5 (entry)
2025-05-07 10:16:57,120 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,120 [INFO] app.utils.lesson_check:138 - Added job for 18:25 (exit)
2025-05-07 10:16:57,125 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,129 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,136 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:16:57,138 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 10:16:57,138 [INFO] app.utils.lesson_check:141 - Lesson check scheduler started successfully
2025-05-07 10:16:57,140 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:16:57,140 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-05-07 10:16:57,140 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 10:16:57,140 [INFO] __main__:34 - Setting up routers and middleware...
2025-05-07 10:16:57,143 [INFO] __main__:43 - Bot is ready to start polling...
2025-05-07 10:16:57,143 [INFO] aiogram.dispatcher:527 - Start polling
2025-05-07 10:16:57,272 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 10:17:01,811 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:17:02,617 [INFO] app.handlers.start:21 - User 845102332 (@dcwscr) started the bot with language en
2025-05-07 10:17:02,620 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 10:17:02,620 [INFO] app.handlers.start:27 - User 845102332 (@dcwscr) is registered, showing main menu
2025-05-07 10:17:02,905 [INFO] aiogram.event:172 - Update id=872174278 is handled. Duration 1295 ms by bot id=7299087266
2025-05-07 10:17:06,395 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:17:06,395 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 10:17:06,395 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:17:06,395 [INFO] app.handlers.navigation:14 - User 845102332 (@dcwscr) ask for navigation
2025-05-07 10:17:06,395 [ERROR] app.handlers.navigation:22 - Error opening navigation menu for user 845102332: 'navigation_text'
Traceback (most recent call last):
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\app\handlers\navigation.py", line 18, in send_navigation
    text=LEXICON_MSG["navigation_text"][lang],
         ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
KeyError: 'navigation_text'
2025-05-07 10:17:06,664 [INFO] aiogram.event:172 - Update id=872174279 is handled. Duration 281 ms by bot id=7299087266
2025-05-07 10:17:50,014 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-05-07 10:17:50,285 [INFO] __main__:49 - Shutting down bot...
2025-05-07 10:17:50,285 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 10:17:50,289 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-05-07 10:17:56,762 [INFO] root:40 - Logging system initialized
2025-05-07 10:17:56,765 [INFO] __main__:21 - Starting bot initialization...
2025-05-07 10:17:57,197 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-05-07 10:17:58,519 [INFO] __main__:30 - Setting up schedulers...
2025-05-07 10:17:58,519 [INFO] app.utils.lesson_check:128 - Setting up lesson check scheduler
2025-05-07 10:17:58,526 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,526 [INFO] app.utils.lesson_check:138 - Added job for 9:35 (entry)
2025-05-07 10:17:58,526 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,526 [INFO] app.utils.lesson_check:138 - Added job for 10:55 (exit)
2025-05-07 10:17:58,529 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,529 [INFO] app.utils.lesson_check:138 - Added job for 11:5 (entry)
2025-05-07 10:17:58,529 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,531 [INFO] app.utils.lesson_check:138 - Added job for 12:25 (exit)
2025-05-07 10:17:58,531 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,531 [INFO] app.utils.lesson_check:138 - Added job for 12:35 (entry)
2025-05-07 10:17:58,532 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,533 [INFO] app.utils.lesson_check:138 - Added job for 13:55 (exit)
2025-05-07 10:17:58,533 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,533 [INFO] app.utils.lesson_check:138 - Added job for 13:5 (entry)
2025-05-07 10:17:58,535 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,535 [INFO] app.utils.lesson_check:138 - Added job for 15:25 (exit)
2025-05-07 10:17:58,535 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,537 [INFO] app.utils.lesson_check:138 - Added job for 15:35 (entry)
2025-05-07 10:17:58,537 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,538 [INFO] app.utils.lesson_check:138 - Added job for 16:55 (exit)
2025-05-07 10:17:58,538 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,538 [INFO] app.utils.lesson_check:138 - Added job for 17:5 (entry)
2025-05-07 10:17:58,538 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,538 [INFO] app.utils.lesson_check:138 - Added job for 18:25 (exit)
2025-05-07 10:17:58,542 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,543 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,545 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,545 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,545 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,545 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,548 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,548 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,550 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,551 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,551 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,553 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:17:58,553 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 10:17:58,553 [INFO] app.utils.lesson_check:141 - Lesson check scheduler started successfully
2025-05-07 10:17:58,555 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:17:58,555 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-05-07 10:17:58,555 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 10:17:58,557 [INFO] __main__:34 - Setting up routers and middleware...
2025-05-07 10:17:58,557 [INFO] __main__:43 - Bot is ready to start polling...
2025-05-07 10:17:58,557 [INFO] aiogram.dispatcher:527 - Start polling
2025-05-07 10:17:58,723 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 10:18:00,205 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:00,225 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 10:18:00,228 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:00,229 [INFO] app.handlers.navigation:14 - User 845102332 (@dcwscr) ask for navigation
2025-05-07 10:18:01,103 [INFO] aiogram.event:172 - Update id=872174280 is handled. Duration 1032 ms by bot id=7299087266
2025-05-07 10:18:16,498 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-05-07 10:18:16,742 [INFO] __main__:49 - Shutting down bot...
2025-05-07 10:18:16,742 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 10:18:16,742 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-05-07 10:18:41,376 [INFO] root:40 - Logging system initialized
2025-05-07 10:18:41,376 [INFO] __main__:21 - Starting bot initialization...
2025-05-07 10:18:41,800 [INFO] __main__:27 - Deleting webhook and setting up bot...
2025-05-07 10:18:42,450 [INFO] __main__:30 - Setting up schedulers...
2025-05-07 10:18:42,450 [INFO] app.utils.lesson_check:128 - Setting up lesson check scheduler
2025-05-07 10:18:42,460 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,460 [INFO] app.utils.lesson_check:138 - Added job for 9:35 (entry)
2025-05-07 10:18:42,460 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,464 [INFO] app.utils.lesson_check:138 - Added job for 10:55 (exit)
2025-05-07 10:18:42,465 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,465 [INFO] app.utils.lesson_check:138 - Added job for 11:5 (entry)
2025-05-07 10:18:42,467 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,467 [INFO] app.utils.lesson_check:138 - Added job for 12:25 (exit)
2025-05-07 10:18:42,467 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,467 [INFO] app.utils.lesson_check:138 - Added job for 12:35 (entry)
2025-05-07 10:18:42,467 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,470 [INFO] app.utils.lesson_check:138 - Added job for 13:55 (exit)
2025-05-07 10:18:42,470 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,470 [INFO] app.utils.lesson_check:138 - Added job for 13:5 (entry)
2025-05-07 10:18:42,473 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,473 [INFO] app.utils.lesson_check:138 - Added job for 15:25 (exit)
2025-05-07 10:18:42,473 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,475 [INFO] app.utils.lesson_check:138 - Added job for 15:35 (entry)
2025-05-07 10:18:42,476 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,476 [INFO] app.utils.lesson_check:138 - Added job for 16:55 (exit)
2025-05-07 10:18:42,476 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,479 [INFO] app.utils.lesson_check:138 - Added job for 17:5 (entry)
2025-05-07 10:18:42,479 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,479 [INFO] app.utils.lesson_check:138 - Added job for 18:25 (exit)
2025-05-07 10:18:42,481 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,483 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,483 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,483 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,485 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,485 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,485 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,487 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,487 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,487 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,489 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,489 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-05-07 10:18:42,489 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 10:18:42,491 [INFO] app.utils.lesson_check:141 - Lesson check scheduler started successfully
2025-05-07 10:18:42,491 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-07 10:18:42,491 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-05-07 10:18:42,491 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-05-07 10:18:42,491 [INFO] __main__:34 - Setting up routers and middleware...
2025-05-07 10:18:42,491 [INFO] __main__:43 - Bot is ready to start polling...
2025-05-07 10:18:42,491 [INFO] aiogram.dispatcher:527 - Start polling
2025-05-07 10:18:42,646 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 10:18:43,745 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:43,745 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 10:18:43,758 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:43,761 [INFO] app.handlers.navigation:14 - User 845102332 (@dcwscr) ask for navigation
2025-05-07 10:18:44,512 [INFO] aiogram.event:172 - Update id=872174281 is handled. Duration 905 ms by bot id=7299087266
2025-05-07 10:18:51,836 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:51,839 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 10:18:51,842 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:51,842 [INFO] app.handlers.settings:21 - User 845102332 (@dcwscr) opened settings menu
2025-05-07 10:18:52,172 [INFO] aiogram.event:172 - Update id=872174282 is handled. Duration 344 ms by bot id=7299087266
2025-05-07 10:18:53,509 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:53,513 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 10:18:53,515 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:53,517 [INFO] app.handlers.settings:53 - User 845102332 (@dcwscr) opened language settings
2025-05-07 10:18:53,811 [INFO] aiogram.event:172 - Update id=872174283 is handled. Duration 312 ms by bot id=7299087266
2025-05-07 10:18:55,147 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-05-07 10:18:55,147 [INFO] app.handlers.settings:129 - User 845102332 (@dcwscr) changed language to ru
2025-05-07 10:18:55,180 [INFO] root:119 - [User] Updated language to 'ru' for telegram_id=845102332
2025-05-07 10:18:55,964 [INFO] aiogram.event:172 - Update id=872174284 is handled. Duration 828 ms by bot id=7299087266
2025-05-07 10:18:57,813 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-05-07 10:18:57,817 [INFO] root:22 - [User] Fetching user for telegram_id=845102332
2025-05-07 10:18:57,818 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → ru
2025-05-07 10:18:57,818 [INFO] app.handlers.navigation:14 - User 845102332 (@dcwscr) ask for navigation
2025-05-07 10:18:58,114 [INFO] aiogram.event:172 - Update id=872174285 is handled. Duration 312 ms by bot id=7299087266
2025-05-07 10:55:00,023 [INFO] apscheduler.executors.default:179 - Running job "check_lesson_marks (trigger: cron[day_of_week='mon-sat', hour='10', minute='55'], next run at: 2025-05-08 10:55:00 +05)" (scheduled at 2025-05-07 10:55:00+05:00)
2025-05-07 10:55:00,024 [INFO] app.utils.lesson_check:83 - Starting lesson check at 2025-05-07 10:55:00.024542
2025-05-07 10:55:00,048 [ERROR] app.utils.lesson_check:123 - Error in check_lesson_marks: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец schedule_cache.week_start не существует
[SQL: SELECT schedule_cache.id, schedule_cache.group_id, schedule_cache.week_start, schedule_cache.data, schedule_cache.updated_at 
FROM schedule_cache]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\asyncpg\connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\asyncpg\connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\asyncpg\connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: столбец schedule_cache.week_start не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец schedule_cache.week_start не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\app\utils\lesson_check.py", line 85, in check_lesson_marks
    group_schedules = await get_all_group_schedules_today(today)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\app\db\crud\schedule.py", line 103, in get_all_group_schedules_today
    result = await session.execute(select(ScheduleCache))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\UWS-006\Desktop\Work\Programs\Projects\bangor_tgbot\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец schedule_cache.week_start не существует
[SQL: SELECT schedule_cache.id, schedule_cache.group_id, schedule_cache.week_start, schedule_cache.data, schedule_cache.updated_at 
FROM schedule_cache]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-05-07 10:55:00,248 [INFO] apscheduler.executors.default:203 - Job "check_lesson_marks (trigger: cron[day_of_week='mon-sat', hour='10', minute='55'], next run at: 2025-05-08 10:55:00 +05)" executed successfully
2025-05-07 10:55:30,746 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-05-07 10:55:30,895 [ERROR] aiogram.dispatcher:219 - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
2025-05-07 10:55:30,895 [WARNING] aiogram.dispatcher:221 - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7299087266)
2025-05-07 10:55:31,008 [INFO] __main__:49 - Shutting down bot...
2025-05-07 10:55:31,010 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-05-07 10:55:31,010 [INFO] __main__:57 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:19:51,920 [INFO] root:36 - Logging system initialized
2025-06-22 01:19:51,923 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:19:52,166 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:19:52,533 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:19:52,533 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:19:52,542 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,542 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:19:52,542 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,543 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:19:52,543 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,543 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:19:52,544 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,544 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:19:52,544 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,544 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:19:52,545 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,545 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:19:52,545 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,546 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:19:52,546 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,546 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:19:52,546 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,547 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:19:52,547 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,547 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:19:52,548 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,548 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:19:52,549 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,549 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:19:52,550 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,550 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,551 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,551 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,551 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,551 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,552 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,552 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,553 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,553 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,553 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,554 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:19:52,554 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:19:52,554 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:19:52,554 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:19:52,554 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:19:52,555 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:19:52,555 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:19:52,555 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:19:52,555 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:19:52,654 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:19:59,531 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:19:59,534 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:19:59,536 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:19:59,536 [INFO] app.handlers.main_menu:54 - User 845102332 (@dcwscr) returned to main menu
2025-06-22 01:19:59,985 [INFO] aiogram.event:172 - Update id=872175329 is handled. Duration 588 ms by bot id=7299087266
2025-06-22 01:20:01,609 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:01,905 [INFO] app.handlers.start:20 - User 845102332 (@dcwscr) started the bot with language en
2025-06-22 01:20:01,910 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:20:01,911 [INFO] app.handlers.start:28 - User 845102332 (@dcwscr) is registered, showing main menu
2025-06-22 01:20:02,135 [INFO] aiogram.event:172 - Update id=872175330 is handled. Duration 528 ms by bot id=7299087266
2025-06-22 01:20:04,465 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:04,466 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:20:04,468 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:04,468 [INFO] app.handlers.settings:30 - User 845102332 (@dcwscr) opened settings menu
2025-06-22 01:20:04,709 [INFO] aiogram.event:172 - Update id=872175331 is handled. Duration 251 ms by bot id=7299087266
2025-06-22 01:20:06,489 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:06,493 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:20:06,496 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:06,498 [INFO] app.handlers.settings:107 - User 845102332 (@dcwscr) requested account deletion
2025-06-22 01:20:06,721 [INFO] aiogram.event:172 - Update id=872175332 is handled. Duration 235 ms by bot id=7299087266
2025-06-22 01:20:07,654 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:07,655 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:08,085 [INFO] app.handlers.settings:134 - User 845102332 (@dcwscr) confirmed account deletion
2025-06-22 01:20:08,107 [INFO] root:156 - [User] Deleted user and settings for telegram_id=845102332
2025-06-22 01:20:08,330 [INFO] aiogram.event:172 - Update id=872175333 is handled. Duration 677 ms by bot id=7299087266
2025-06-22 01:20:10,801 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:20:11,035 [INFO] app.handlers.start:20 - User 845102332 (@dcwscr) started the bot with language en
2025-06-22 01:20:11,038 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:20:11,038 [INFO] app.handlers.start:36 - User 845102332 (@dcwscr) is not registered, showing login prompt
2025-06-22 01:20:11,334 [INFO] aiogram.event:172 - Update id=872175334 is handled. Duration 535 ms by bot id=7299087266
2025-06-22 01:20:12,931 [INFO] aiogram.event:172 - Update id=872175335 is not handled. Duration 1 ms by bot id=7299087266
2025-06-22 01:22:17,473 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:22:17,725 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:22:17,726 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:22:17,731 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:22:20,803 [INFO] root:36 - Logging system initialized
2025-06-22 01:22:20,804 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:22:21,035 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:22:21,347 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:22:21,347 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:22:21,350 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,350 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:22:21,350 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,350 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:22:21,351 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,351 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:22:21,351 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,351 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:22:21,351 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,352 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:22:21,352 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,352 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:22:21,353 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,353 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:22:21,353 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,353 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:22:21,354 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,354 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:22:21,354 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,354 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:22:21,354 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,354 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:22:21,355 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,355 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:22:21,356 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,356 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,356 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,356 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,357 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,357 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,357 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,358 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,358 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,358 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,359 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,359 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:22:21,360 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:22:21,360 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:22:21,361 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:22:21,361 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:22:21,361 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:22:21,362 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:22:21,362 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:22:21,362 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:22:21,470 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:22:22,335 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:22:22,983 [INFO] aiogram.event:172 - Update id=872175336 is handled. Duration 711 ms by bot id=7299087266
2025-06-22 01:22:24,353 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:22:24,571 [INFO] app.handlers.login:22 - User 7299087266 (@singapore_unibot) started login process
2025-06-22 01:22:25,001 [INFO] aiogram.event:172 - Update id=872175337 is handled. Duration 649 ms by bot id=7299087266
2025-06-22 01:22:29,160 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:22:29,162 [INFO] app.handlers.login:48 - User 845102332 (@dcwscr) entered login
2025-06-22 01:22:29,623 [INFO] aiogram.event:172 - Update id=872175338 is handled. Duration 466 ms by bot id=7299087266
2025-06-22 01:22:32,065 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:22:32,066 [INFO] app.handlers.login:69 - User 845102332 (@dcwscr) entered password
2025-06-22 01:22:33,327 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-06-22 01:22:33,640 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/view/students?selfId=59158 "HTTP/1.1 200 "
2025-06-22 01:22:33,641 [INFO] app.utils.schedule:49 - Successfully fetched user data for inet_id 59158
2025-06-22 01:22:33,645 [INFO] root:61 - [User] Check registration status for telegram_id=845102332
2025-06-22 01:22:33,675 [INFO] root:92 - [User] Created user telegram_id=845102332, group_id=232
2025-06-22 01:22:33,679 [INFO] app.handlers.login:127 - User 845102332 (@dcwscr) successfully registered with group_id=232
2025-06-22 01:22:34,139 [INFO] aiogram.event:172 - Update id=872175339 is handled. Duration 2076 ms by bot id=7299087266
2025-06-22 01:24:05,361 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:24:05,616 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:24:05,617 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:24:05,619 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:24:08,696 [INFO] root:36 - Logging system initialized
2025-06-22 01:24:08,698 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:24:08,925 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:24:09,285 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:24:09,285 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:24:09,287 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,287 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:24:09,288 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,288 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:24:09,288 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,288 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:24:09,288 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,289 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:24:09,289 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,289 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:24:09,289 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,289 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:24:09,290 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,290 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:24:09,290 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,291 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:24:09,291 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,291 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:24:09,292 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,292 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:24:09,293 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,293 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:24:09,294 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,294 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:24:09,295 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,295 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,296 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,296 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,296 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,297 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,298 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:24:09,298 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:24:09,299 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:24:09,299 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:24:09,300 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:24:09,300 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:24:09,300 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:24:09,301 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:24:09,301 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:24:09,417 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:24:09,605 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:09,609 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:24:09,610 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:09,611 [INFO] app.handlers.settings:30 - User 845102332 (@dcwscr) opened settings menu
2025-06-22 01:24:10,043 [INFO] aiogram.event:172 - Update id=872175340 is handled. Duration 506 ms by bot id=7299087266
2025-06-22 01:24:11,183 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:11,185 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:24:11,186 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:11,187 [INFO] app.handlers.settings:107 - User 845102332 (@dcwscr) requested account deletion
2025-06-22 01:24:11,407 [INFO] aiogram.event:172 - Update id=872175341 is handled. Duration 226 ms by bot id=7299087266
2025-06-22 01:24:12,236 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:12,237 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:12,666 [INFO] app.handlers.settings:134 - User 845102332 (@dcwscr) confirmed account deletion
2025-06-22 01:24:12,678 [INFO] root:156 - [User] Deleted user and settings for telegram_id=845102332
2025-06-22 01:24:12,900 [INFO] aiogram.event:172 - Update id=872175342 is handled. Duration 665 ms by bot id=7299087266
2025-06-22 01:24:14,998 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:15,220 [INFO] app.handlers.start:20 - User 845102332 (@dcwscr) started the bot with language en
2025-06-22 01:24:15,222 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:24:15,223 [INFO] app.handlers.start:36 - User 845102332 (@dcwscr) is not registered, showing login prompt
2025-06-22 01:24:15,442 [INFO] aiogram.event:172 - Update id=872175343 is handled. Duration 446 ms by bot id=7299087266
2025-06-22 01:24:16,301 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:24:16,947 [INFO] aiogram.event:172 - Update id=872175344 is handled. Duration 647 ms by bot id=7299087266
2025-06-22 01:24:18,742 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:24:19,004 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:24:19,005 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:24:19,006 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:31:48,182 [INFO] root:36 - Logging system initialized
2025-06-22 01:31:48,183 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:31:48,394 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:31:48,759 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:31:48,759 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:31:48,763 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,763 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:31:48,764 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,764 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:31:48,764 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,764 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:31:48,764 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,765 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:31:48,766 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,766 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:31:48,767 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,767 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:31:48,768 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,769 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:31:48,770 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,771 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:31:48,771 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,772 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:31:48,773 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,773 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:31:48,774 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,775 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:31:48,778 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,779 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:31:48,782 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,782 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,783 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,784 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,785 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,785 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,786 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,787 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,787 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,788 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,788 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,789 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:31:48,789 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:31:48,790 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:31:48,791 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:31:48,791 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:31:48,791 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:31:48,791 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:31:48,792 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:31:48,792 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:31:48,894 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:31:50,376 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:31:50,791 [INFO] app.handlers.login:22 - User 7299087266 (@singapore_unibot) started login process
2025-06-22 01:31:51,412 [INFO] aiogram.event:172 - Update id=872175345 is handled. Duration 1097 ms by bot id=7299087266
2025-06-22 01:31:54,898 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:31:54,899 [INFO] app.handlers.login:48 - User 845102332 (@dcwscr) entered login
2025-06-22 01:31:55,337 [INFO] aiogram.event:172 - Update id=872175346 is handled. Duration 442 ms by bot id=7299087266
2025-06-22 01:31:56,962 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:31:56,963 [INFO] app.handlers.login:69 - User 845102332 (@dcwscr) entered password
2025-06-22 01:31:58,215 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-06-22 01:31:58,531 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/view/students?selfId=59158 "HTTP/1.1 200 "
2025-06-22 01:31:58,532 [INFO] app.utils.schedule:49 - Successfully fetched user data for inet_id 59158
2025-06-22 01:31:58,534 [INFO] root:61 - [User] Check registration status for telegram_id=845102332
2025-06-22 01:31:58,546 [INFO] root:92 - [User] Created user telegram_id=845102332, group_id=232
2025-06-22 01:31:58,555 [INFO] app.handlers.login:127 - User 845102332 (@dcwscr) successfully registered with group_id=232
2025-06-22 01:31:58,996 [INFO] aiogram.event:172 - Update id=872175347 is handled. Duration 2036 ms by bot id=7299087266
2025-06-22 01:32:00,826 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:32:00,828 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:32:00,829 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:32:00,829 [INFO] app.admin.admin:31 - [Admin] Admin 845102332 opened admin panel
2025-06-22 01:32:01,048 [INFO] aiogram.event:172 - Update id=872175348 is handled. Duration 224 ms by bot id=7299087266
2025-06-22 01:32:02,895 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:32:03,107 [INFO] app.admin.admin:44 - [Admin] Admin 7299087266 initiated a broadcast
2025-06-22 01:32:03,324 [INFO] aiogram.event:172 - Update id=872175349 is handled. Duration 432 ms by bot id=7299087266
2025-06-22 01:32:06,867 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:32:06,868 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:32:06,869 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:32:06,870 [INFO] app.admin.admin:134 - [Admin] Admin 845102332 submitted a message for preview
2025-06-22 01:32:07,530 [INFO] aiogram.event:172 - Update id=872175350 is handled. Duration 668 ms by bot id=7299087266
2025-06-22 01:32:49,882 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:32:50,148 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:32:50,149 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:32:50,150 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:32:53,198 [INFO] root:36 - Logging system initialized
2025-06-22 01:32:53,199 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:32:53,425 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:32:53,727 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:32:53,727 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:32:53,730 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,730 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:32:53,731 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,731 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:32:53,731 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,731 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:32:53,731 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,732 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:32:53,732 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,732 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:32:53,732 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,732 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:32:53,733 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,733 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:32:53,733 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,733 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:32:53,733 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,733 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:32:53,734 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,734 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:32:53,734 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,734 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:32:53,735 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,735 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:32:53,736 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,736 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,736 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,736 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,737 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,737 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,737 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,738 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,738 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,739 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,739 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,739 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:32:53,740 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:32:53,740 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:32:53,741 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:32:53,741 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:32:53,742 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:32:53,742 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:32:53,742 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:32:53,743 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:32:53,845 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:32:56,503 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:32:56,504 [INFO] app.admin.admin:180 - [Admin] Admin 845102332 confirmed broadcast
2025-06-22 01:32:56,929 [INFO] root:12 - [User] Fetching all users
2025-06-22 01:32:56,933 [WARNING] app.admin.admin:197 - [Admin] Failed to send message to 845102332: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.8/v/string_type
2025-06-22 01:32:56,933 [INFO] app.admin.admin:199 - [Admin] Broadcast finished by admin 845102332: 0 sent, 1 failed
2025-06-22 01:32:57,424 [INFO] aiogram.event:172 - Update id=872175351 is handled. Duration 1096 ms by bot id=7299087266
2025-06-22 01:33:27,616 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:33:27,881 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:33:27,883 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:33:27,886 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:33:30,748 [INFO] root:36 - Logging system initialized
2025-06-22 01:33:30,749 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:33:30,996 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:33:31,371 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:33:31,372 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:33:31,378 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,378 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:33:31,379 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,379 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:33:31,380 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,380 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:33:31,381 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,381 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:33:31,382 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,382 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:33:31,382 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,382 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:33:31,382 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,382 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:33:31,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,383 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:33:31,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,383 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:33:31,383 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,383 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:33:31,384 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,385 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:33:31,386 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,387 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:33:31,389 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,389 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,390 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,390 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,391 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,391 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,391 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,392 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,392 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,392 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,393 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,393 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:33:31,393 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:33:31,393 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:33:31,394 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:33:31,394 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:33:31,394 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:33:31,394 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:33:31,395 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:33:31,395 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:33:31,499 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:33:31,835 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:33:32,276 [INFO] app.handlers.start:20 - User 845102332 (@dcwscr) started the bot with language en
2025-06-22 01:33:32,281 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:33:32,282 [INFO] app.handlers.start:28 - User 845102332 (@dcwscr) is registered, showing main menu
2025-06-22 01:33:32,503 [INFO] aiogram.event:172 - Update id=872175352 is handled. Duration 729 ms by bot id=7299087266
2025-06-22 01:33:33,884 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:33:33,886 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:33:33,888 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:33:33,888 [INFO] app.admin.admin:31 - [Admin] Admin 845102332 opened admin panel
2025-06-22 01:33:34,109 [INFO] aiogram.event:172 - Update id=872175353 is handled. Duration 228 ms by bot id=7299087266
2025-06-22 01:33:35,721 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:33:35,933 [INFO] app.admin.admin:44 - [Admin] Admin 7299087266 initiated a broadcast
2025-06-22 01:33:36,158 [INFO] aiogram.event:172 - Update id=872175354 is handled. Duration 439 ms by bot id=7299087266
2025-06-22 01:33:41,686 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:33:41,688 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:33:41,690 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:33:41,691 [INFO] app.admin.admin:134 - [Admin] Admin 845102332 submitted a message for preview
2025-06-22 01:33:42,384 [INFO] aiogram.event:172 - Update id=872175355 is handled. Duration 702 ms by bot id=7299087266
2025-06-22 01:33:43,568 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:33:43,569 [INFO] app.admin.admin:180 - [Admin] Admin 845102332 confirmed broadcast
2025-06-22 01:33:43,798 [INFO] root:12 - [User] Fetching all users
2025-06-22 01:33:44,026 [INFO] app.admin.admin:200 - [Admin] Broadcast finished by admin 845102332: 1 sent, 0 failed
2025-06-22 01:33:44,459 [INFO] aiogram.event:172 - Update id=872175356 is handled. Duration 895 ms by bot id=7299087266
2025-06-22 01:34:22,058 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:34:22,257 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:34:22,263 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:34:22,266 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:35:53,341 [INFO] root:36 - Logging system initialized
2025-06-22 01:35:53,342 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:35:53,563 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:35:53,877 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:35:53,877 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:35:53,879 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,880 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:35:53,880 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,880 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:35:53,880 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,880 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:35:53,880 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,881 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:35:53,881 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,881 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:35:53,881 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,881 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:35:53,882 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,882 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:35:53,882 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,882 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:35:53,883 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,884 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:35:53,884 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,884 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:35:53,884 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,884 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:35:53,886 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,886 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:35:53,888 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,889 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,889 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,889 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,890 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,891 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,891 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,891 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,892 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:35:53,892 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:35:53,895 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:35:53,896 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:35:53,898 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:35:53,899 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:35:53,899 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:35:53,899 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:35:53,900 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:35:54,009 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:36:00,513 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:36:00,778 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:36:00,779 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:36:00,782 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:36:24,489 [INFO] root:36 - Logging system initialized
2025-06-22 01:36:24,490 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:36:24,708 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:36:25,015 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:36:25,015 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:36:25,017 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,018 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:36:25,018 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,018 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:36:25,019 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,019 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:36:25,019 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,019 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:36:25,020 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,020 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:36:25,020 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,020 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:36:25,020 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,021 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:36:25,021 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,022 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:36:25,022 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,022 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:36:25,022 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,022 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:36:25,023 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,023 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:36:25,023 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,023 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:36:25,025 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,025 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,025 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,026 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,026 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,026 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,026 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,027 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,027 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,028 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,028 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,029 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:36:25,029 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:36:25,030 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:36:25,031 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:36:25,031 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:36:25,031 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:36:25,032 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:36:25,032 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:36:25,032 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:36:25,135 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:36:25,763 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:36:26,193 [INFO] app.handlers.start:20 - User 845102332 (@dcwscr) started the bot with language en
2025-06-22 01:36:26,197 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:36:26,198 [INFO] app.handlers.start:28 - User 845102332 (@dcwscr) is registered, showing main menu
2025-06-22 01:36:26,419 [INFO] aiogram.event:172 - Update id=872175357 is handled. Duration 716 ms by bot id=7299087266
2025-06-22 01:36:27,724 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:36:27,726 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:36:27,727 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:36:27,728 [INFO] app.admin.admin:31 - [Admin] Admin 845102332 opened admin panel
2025-06-22 01:36:27,945 [INFO] aiogram.event:172 - Update id=872175358 is handled. Duration 225 ms by bot id=7299087266
2025-06-22 01:36:28,915 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:36:29,130 [INFO] app.admin.admin:44 - [Admin] Admin 7299087266 initiated a broadcast
2025-06-22 01:36:29,347 [INFO] aiogram.event:172 - Update id=872175359 is handled. Duration 435 ms by bot id=7299087266
2025-06-22 01:36:30,915 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:36:30,918 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:36:30,919 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:36:30,920 [INFO] app.admin.admin:134 - [Admin] Admin 845102332 submitted a message for preview
2025-06-22 01:36:31,656 [INFO] aiogram.event:172 - Update id=872175360 is handled. Duration 749 ms by bot id=7299087266
2025-06-22 01:36:52,748 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:36:52,748 [INFO] app.admin.admin:168 - [Admin] Admin 845102332 confirmed broadcast
2025-06-22 01:36:53,179 [INFO] root:12 - [User] Fetching all users
2025-06-22 01:36:53,411 [INFO] app.admin.admin:188 - [Admin] Broadcast finished by admin 845102332: 1 sent, 0 failed
2025-06-22 01:36:53,842 [INFO] aiogram.event:172 - Update id=872175361 is handled. Duration 1098 ms by bot id=7299087266
2025-06-22 01:36:56,252 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:36:56,518 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:36:56,520 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:36:56,522 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:37:06,847 [INFO] root:36 - Logging system initialized
2025-06-22 01:37:06,849 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:37:07,121 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:37:07,445 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:37:07,445 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:37:07,450 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,450 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:37:07,451 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,451 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:37:07,452 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,452 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:37:07,452 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,453 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:37:07,453 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,453 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:37:07,454 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,454 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:37:07,455 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,455 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:37:07,455 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,456 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:37:07,456 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,456 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:37:07,457 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,457 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:37:07,458 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,458 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:37:07,458 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,459 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:37:07,460 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,461 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,461 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,462 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,462 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,463 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,463 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,463 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,464 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,464 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,464 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,464 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:37:07,465 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:37:07,465 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:37:07,465 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:37:07,466 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:37:07,466 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:37:07,466 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:37:07,466 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:37:07,467 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:37:07,574 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:37:09,385 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:37:09,824 [INFO] app.admin.admin:44 - [Admin] Admin 7299087266 initiated a broadcast
2025-06-22 01:37:10,075 [INFO] aiogram.event:172 - Update id=872175362 is handled. Duration 771 ms by bot id=7299087266
2025-06-22 01:37:28,841 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:37:28,845 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:37:28,847 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:37:28,848 [INFO] app.admin.admin:134 - [Admin] Admin 845102332 submitted a message for preview
2025-06-22 01:37:29,806 [INFO] aiogram.event:172 - Update id=872175363 is handled. Duration 972 ms by bot id=7299087266
2025-06-22 01:37:34,472 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:37:34,734 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:37:34,735 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:37:34,736 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:41:44,365 [INFO] root:36 - Logging system initialized
2025-06-22 01:41:44,366 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:41:44,597 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:41:44,956 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:41:44,956 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:41:44,959 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,959 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:41:44,959 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,959 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:41:44,960 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,960 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:41:44,960 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,960 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:41:44,960 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,960 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:41:44,961 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,961 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:41:44,961 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,961 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:41:44,961 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,962 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:41:44,962 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,962 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:41:44,962 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,963 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:41:44,963 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,963 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:41:44,963 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,963 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:41:44,964 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,964 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,965 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,965 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,965 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,965 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,965 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,965 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,966 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,966 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,966 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,966 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:41:44,967 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:41:44,967 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:41:44,968 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:41:44,968 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:41:44,969 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:41:44,969 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:41:44,969 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:41:44,969 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:41:45,068 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:41:47,860 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:41:48,281 [INFO] app.admin.admin:44 - [Admin] Admin 7299087266 initiated a broadcast
2025-06-22 01:41:48,605 [INFO] aiogram.event:172 - Update id=872175364 is handled. Duration 812 ms by bot id=7299087266
2025-06-22 01:41:54,218 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:41:54,221 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:41:54,222 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:41:54,223 [INFO] app.admin.admin:134 - [Admin] Admin 845102332 submitted a message for preview
2025-06-22 01:41:54,900 [INFO] aiogram.event:172 - Update id=872175365 is handled. Duration 689 ms by bot id=7299087266
2025-06-22 01:41:57,335 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:41:57,335 [INFO] app.admin.admin:167 - [Admin] Admin 845102332 confirmed broadcast
2025-06-22 01:41:57,567 [INFO] root:12 - [User] Fetching all users
2025-06-22 01:41:57,792 [INFO] app.admin.admin:188 - [Admin] Broadcast finished by admin 845102332: 1 sent, 0 failed
2025-06-22 01:41:58,237 [INFO] aiogram.event:172 - Update id=872175366 is handled. Duration 905 ms by bot id=7299087266
2025-06-22 01:42:10,265 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:42:10,491 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:42:10,492 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:42:10,495 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:49:21,501 [INFO] root:36 - Logging system initialized
2025-06-22 01:49:21,502 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:49:21,712 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:49:21,844 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:49:22,056 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
2025-06-22 01:49:30,480 [INFO] root:36 - Logging system initialized
2025-06-22 01:49:30,481 [INFO] __main__:22 - Starting bot initialization...
2025-06-22 01:49:30,714 [INFO] __main__:28 - Deleting webhook and setting up bot...
2025-06-22 01:49:31,025 [INFO] __main__:31 - Setting up schedulers...
2025-06-22 01:49:31,025 [INFO] app.utils.lesson_check:160 - Setting up lesson check scheduler
2025-06-22 01:49:31,027 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,027 [INFO] app.utils.lesson_check:172 - Added job for 9:35 (entry)
2025-06-22 01:49:31,028 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,028 [INFO] app.utils.lesson_check:172 - Added job for 10:55 (exit)
2025-06-22 01:49:31,028 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,028 [INFO] app.utils.lesson_check:172 - Added job for 11:5 (entry)
2025-06-22 01:49:31,028 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,028 [INFO] app.utils.lesson_check:172 - Added job for 12:25 (exit)
2025-06-22 01:49:31,029 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,029 [INFO] app.utils.lesson_check:172 - Added job for 12:35 (entry)
2025-06-22 01:49:31,029 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,029 [INFO] app.utils.lesson_check:172 - Added job for 13:55 (exit)
2025-06-22 01:49:31,029 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,030 [INFO] app.utils.lesson_check:172 - Added job for 13:5 (entry)
2025-06-22 01:49:31,030 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,030 [INFO] app.utils.lesson_check:172 - Added job for 15:25 (exit)
2025-06-22 01:49:31,031 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,031 [INFO] app.utils.lesson_check:172 - Added job for 15:35 (entry)
2025-06-22 01:49:31,032 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,033 [INFO] app.utils.lesson_check:172 - Added job for 16:55 (exit)
2025-06-22 01:49:31,033 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,033 [INFO] app.utils.lesson_check:172 - Added job for 17:5 (entry)
2025-06-22 01:49:31,034 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,034 [INFO] app.utils.lesson_check:172 - Added job for 18:25 (exit)
2025-06-22 01:49:31,035 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,035 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,035 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,036 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,036 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,036 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,036 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,036 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,037 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,037 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,037 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,037 [INFO] apscheduler.scheduler:1090 - Added job "check_lesson_marks" to job store "default"
2025-06-22 01:49:31,037 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:49:31,038 [INFO] app.utils.lesson_check:175 - Lesson check scheduler started successfully
2025-06-22 01:49:31,038 [INFO] apscheduler.scheduler:507 - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-22 01:49:31,038 [INFO] apscheduler.scheduler:1090 - Added job "send_today_schedule_digest" to job store "default"
2025-06-22 01:49:31,039 [INFO] apscheduler.scheduler:214 - Scheduler started
2025-06-22 01:49:31,039 [INFO] __main__:35 - Setting up routers and middleware...
2025-06-22 01:49:31,039 [INFO] __main__:44 - Bot is ready to start polling...
2025-06-22 01:49:31,039 [INFO] aiogram.dispatcher:527 - Start polling
2025-06-22 01:49:31,142 [INFO] aiogram.dispatcher:341 - Run polling for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:49:34,978 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:35,409 [INFO] app.handlers.start:20 - User 845102332 (@dcwscr) started the bot with language en
2025-06-22 01:49:35,412 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:49:35,413 [INFO] app.handlers.start:28 - User 845102332 (@dcwscr) is registered, showing main menu
2025-06-22 01:49:35,633 [INFO] aiogram.event:172 - Update id=872175367 is handled. Duration 712 ms by bot id=7299087266
2025-06-22 01:49:36,514 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:36,515 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:49:36,517 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:36,517 [INFO] app.handlers.main_menu:35 - User 845102332 (@dcwscr) opened inet schedule menu
2025-06-22 01:49:36,737 [INFO] aiogram.event:172 - Update id=872175368 is handled. Duration 227 ms by bot id=7299087266
2025-06-22 01:49:38,454 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:38,456 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:49:38,459 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:38,459 [INFO] app.handlers.schedule:152 - User 845102332 (@dcwscr) requested attendance
2025-06-22 01:49:38,468 [INFO] root:110 - [User] Credentials decrypted for telegram_id=845102332
2025-06-22 01:49:39,012 [INFO] httpx:1740 - HTTP Request: POST https://inet.mdis.uz/oauth/tocken "HTTP/1.1 200 "
2025-06-22 01:49:39,013 [INFO] app.utils.schedule:27 - Successfully obtained token for user b2305078
2025-06-22 01:49:39,016 [INFO] root:48 - [User] Attendance data for telegram_id=845102332
2025-06-22 01:49:39,357 [INFO] httpx:1740 - HTTP Request: GET https://inet.mdis.uz/api/v1/education/students/attendances?page=0&perPage=10&direction=ASC&sortBy=id&semesterId=242&studentId=59158 "HTTP/1.1 200 "
2025-06-22 01:49:39,358 [INFO] app.utils.schedule:142 - Successfully fetched attendance data for user 845102332
2025-06-22 01:49:39,604 [INFO] aiogram.event:172 - Update id=872175369 is handled. Duration 1157 ms by bot id=7299087266
2025-06-22 01:49:44,428 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:44,429 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:49:44,431 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:44,431 [INFO] app.handlers.main_menu:54 - User 845102332 (@dcwscr) returned to main menu
2025-06-22 01:49:44,646 [INFO] aiogram.event:172 - Update id=872175370 is handled. Duration 220 ms by bot id=7299087266
2025-06-22 01:49:46,763 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:46,764 [INFO] root:21 - [User] Fetching user for telegram_id=845102332
2025-06-22 01:49:46,765 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:46,765 [INFO] app.admin.admin:31 - [Admin] Admin 845102332 opened admin panel
2025-06-22 01:49:46,981 [INFO] aiogram.event:172 - Update id=872175371 is handled. Duration 221 ms by bot id=7299087266
2025-06-22 01:49:53,036 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:53,254 [INFO] aiogram.event:172 - Update id=872175372 is handled. Duration 220 ms by bot id=7299087266
2025-06-22 01:49:55,421 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:49:55,423 [INFO] app.admin.admin:99 - [Admin] Admin 845102332 requested log file
2025-06-22 01:49:56,598 [INFO] aiogram.event:172 - Update id=872175373 is handled. Duration 1193 ms by bot id=7299087266
2025-06-22 01:50:01,464 [INFO] root:33 - [User] Getting language for telegram_id=845102332 → en
2025-06-22 01:50:01,673 [INFO] app.admin.admin:59 - [Admin] Admin 7299087266 initiated a stats request
2025-06-22 01:50:01,678 [INFO] app.db.crud.stats:15 - [Stats] Total users: 4
2025-06-22 01:50:01,681 [INFO] app.db.crud.stats:26 - [Stats] New users in last 7 days: 1
2025-06-22 01:50:01,682 [INFO] app.db.crud.stats:26 - [Stats] New users in last 1 days: 1
2025-06-22 01:50:01,685 [INFO] app.db.crud.stats:38 - [Stats] Users with today's digest: 4
2025-06-22 01:50:01,687 [INFO] app.db.crud.stats:50 - [Stats] Users with daily digest: 4
2025-06-22 01:50:01,695 [INFO] app.db.crud.stats:60 - [Stats] User language distribution: {'ru': 1, 'en': 3}
2025-06-22 01:50:01,916 [INFO] aiogram.event:172 - Update id=872175374 is handled. Duration 453 ms by bot id=7299087266
2025-06-22 01:50:05,357 [INFO] aiogram.dispatcher:554 - Polling stopped
2025-06-22 01:50:05,616 [INFO] __main__:50 - Shutting down bot...
2025-06-22 01:50:05,617 [INFO] aiogram.dispatcher:359 - Polling stopped for bot @singapore_unibot id=7299087266 - 'MDIST BOT'
2025-06-22 01:50:05,619 [INFO] __main__:59 - Bot stopped by user (KeyboardInterrupt)
